<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>managers/input.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/bento.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><details><summary>bento</summary><a href="module-bento.html">bento</a><ul class='methods'><li data-type='method'><a href="module-bento.html#createCanvas">createCanvas</a></li><li data-type='method'><a href="module-bento.html#getAntiAlias">getAntiAlias</a></li><li data-type='method'><a href="module-bento.html#getCanvas">getCanvas</a></li><li data-type='method'><a href="module-bento.html#getGameData">getGameData</a></li><li data-type='method'><a href="module-bento.html#getGameSpeed">getGameSpeed</a></li><li data-type='method'><a href="module-bento.html#getRenderer">getRenderer</a></li><li data-type='method'><a href="module-bento.html#getSettings">getSettings</a></li><li data-type='method'><a href="module-bento.html#getViewport">getViewport</a></li><li data-type='method'><a href="module-bento.html#isDev">isDev</a></li><li data-type='method'><a href="module-bento.html#reload">reload</a></li><li data-type='method'><a href="module-bento.html#setAntiAlias">setAntiAlias</a></li><li data-type='method'><a href="module-bento.html#setGameSpeed">setGameSpeed</a></li><li data-type='method'><a href="module-bento.html#setup">setup</a></li></ul></details></li><li><details><summary>bento/autoresize</summary><a href="module-bento_autoresize.html">bento/autoresize</a></details></li><li><details><summary>bento/canvas</summary><a href="module-bento_canvas.html">bento/canvas</a><ul class='methods'><li data-type='method'><a href="module-bento_canvas.html#downloadImage">downloadImage</a></li><li data-type='method'><a href="module-bento_canvas.html#drawOnce">drawOnce</a></li><li data-type='method'><a href="module-bento_canvas.html#getBase64">getBase64</a></li><li data-type='method'><a href="module-bento_canvas.html#getCanvas">getCanvas</a></li><li data-type='method'><a href="module-bento_canvas.html#getContext">getContext</a></li></ul></details></li><li><details><summary>bento/components/clickable</summary><a href="module-bento_components_clickable.html">bento/components/clickable</a><ul class='methods'><li data-type='method'><a href="module-bento_components_clickable.html#isPaused">isPaused</a></li></ul></details></li><li><details><summary>bento/components/eventlistener</summary><a href="module-bento_components_eventlistener.html">bento/components/eventlistener</a></details></li><li><details><summary>bento/components/fill</summary><a href="module-bento_components_fill.html">bento/components/fill</a><ul class='methods'><li data-type='method'><a href="module-bento_components_fill.html#setOriginRelative">setOriginRelative</a></li></ul></details></li><li><details><summary>bento/components/modal</summary><a href="module-bento_components_modal.html">bento/components/modal</a></details></li><li><details><summary>bento/components/nineslice</summary><a href="module-bento_components_nineslice.html">bento/components/nineslice</a><ul class='methods'><li data-type='method'><a href="module-bento_components_nineslice.html#setOriginRelative">setOriginRelative</a></li></ul></details></li><li><details><summary>bento/components/pixi/sprite</summary><a href="module-bento_components_pixi_sprite.html">bento/components/pixi/sprite</a></details></li><li><details><summary>bento/components/spine</summary><a href="module-bento_components_spine.html">bento/components/spine</a><ul class='methods'><li data-type='method'><a href="module-bento_components_spine.html#getAnimation">getAnimation</a></li><li data-type='method'><a href="module-bento_components_spine.html#getCurrentSpeed">getCurrentSpeed</a></li><li data-type='method'><a href="module-bento_components_spine.html#getSpineData">getSpineData</a></li><li data-type='method'><a href="module-bento_components_spine.html#setAnimation">setAnimation</a></li><li data-type='method'><a href="module-bento_components_spine.html#setCurrentSpeed">setCurrentSpeed</a></li></ul></details></li><li><details><summary>bento/components/sprite</summary><a href="module-bento_components_sprite.html">bento/components/sprite</a><ul class='methods'><li data-type='method'><a href="module-bento_components_sprite.html#getAnimationName">getAnimationName</a></li><li data-type='method'><a href="module-bento_components_sprite.html#getCurrentFrame">getCurrentFrame</a></li><li data-type='method'><a href="module-bento_components_sprite.html#getCurrentSpeed">getCurrentSpeed</a></li><li data-type='method'><a href="module-bento_components_sprite.html#getFrameHeight">getFrameHeight</a></li><li data-type='method'><a href="module-bento_components_sprite.html#getFrameWidth">getFrameWidth</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setAnimation">setAnimation</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setAnimation">setAnimation</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setCurrentSpeed">setCurrentSpeed</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setFrame">setFrame</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setOriginRelative">setOriginRelative</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setup">setup</a></li></ul></details></li><li><details><summary>bento/entity</summary><a href="module-bento_entity.html">bento/entity</a><ul class='methods'><li data-type='method'><a href="module-bento_entity.html#attach">attach</a></li><li data-type='method'><a href="module-bento_entity.html#collidesWith">collidesWith</a></li><li data-type='method'><a href="module-bento_entity.html#extend">extend</a></li><li data-type='method'><a href="module-bento_entity.html#getBoundingBox">getBoundingBox</a></li><li data-type='method'><a href="module-bento_entity.html#getComponent">getComponent</a></li><li data-type='method'><a href="module-bento_entity.html#getWorldPosition">getWorldPosition</a></li><li data-type='method'><a href="module-bento_entity.html#moveComponentTo">moveComponentTo</a></li><li data-type='method'><a href="module-bento_entity.html#remove">remove</a></li><li data-type='method'><a href="module-bento_entity.html#removeByName">removeByName</a></li><li data-type='method'><a href="module-bento_entity.html#removeSelf">removeSelf</a></li><li data-type='method'><a href="module-bento_entity.html#toComparablePosition">toComparablePosition</a></li><li data-type='method'><a href="module-bento_entity.html#toLocalPosition">toLocalPosition</a></li><li data-type='method'><a href="module-bento_entity.html#toWorldPosition">toWorldPosition</a></li></ul></details></li><li><details><summary>bento/eventsystem</summary><a href="module-bento_eventsystem.html">bento/eventsystem</a><ul class='methods'><li data-type='method'><a href="module-bento_eventsystem.html#clear">clear</a></li><li data-type='method'><a href="module-bento_eventsystem.html#fire">fire</a></li><li data-type='method'><a href="module-bento_eventsystem.html#off">off</a></li><li data-type='method'><a href="module-bento_eventsystem.html#on">on</a></li><li data-type='method'><a href="module-bento_eventsystem.html#stopPropagation">stopPropagation</a></li></ul></details></li><li><details><summary>bento/gui/centeredlist</summary><a href="module-bento_gui_centeredlist.html">bento/gui/centeredlist</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_centeredlist.html#clear">clear</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#get">get</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#getIndex">getIndex</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#iterate">iterate</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#length">length</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#removeItem">removeItem</a></li></ul></details></li><li><details><summary>bento/gui/clickbutton</summary><a href="module-bento_gui_clickbutton.html">bento/gui/clickbutton</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_clickbutton.html#active">active</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#doCallback">doCallback</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#isActive">isActive</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#mimicClick">mimicClick</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#setActive">setActive</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#setNineSliceSize">setNineSliceSize</a></li></ul></details></li><li><details><summary>bento/gui/counter</summary><a href="module-bento_gui_counter.html">bento/gui/counter</a></details></li><li><details><summary>bento/gui/scrollinglist</summary><a href="module-bento_gui_scrollinglist.html">bento/gui/scrollinglist</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_scrollinglist.html#active">active</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#addItem">addItem</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#cancel">cancel</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#didMove">didMove</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#forceTo">forceTo</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#get">get</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#getItems">getItems</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#getScroll">getScroll</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#getSelection">getSelection</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#getTotalSize">getTotalSize</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#isScrolling">isScrolling</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#iterate">iterate</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#length">length</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#removeItem">removeItem</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setActive">setActive</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setArea">setArea</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setMaxOffset">setMaxOffset</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setMinOffset">setMinOffset</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setSpacing">setSpacing</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#snapTo">snapTo</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#stopSliding">stopSliding</a></li></ul></details></li><li><details><summary>bento/gui/text</summary><a href="module-bento_gui_text.html">bento/gui/text</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_text.html#getCanvas">getCanvas</a></li><li data-type='method'><a href="module-bento_gui_text.html#getEffectiveFontSize">getEffectiveFontSize</a></li><li data-type='method'><a href="module-bento_gui_text.html#getStrings">getStrings</a></li><li data-type='method'><a href="module-bento_gui_text.html#getText">getText</a></li><li data-type='method'><a href="module-bento_gui_text.html#setText">setText</a></li></ul></details></li><li><details><summary>bento/gui/togglebutton</summary><a href="module-bento_gui_togglebutton.html">bento/gui/togglebutton</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_togglebutton.html#doCallback">doCallback</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#isActive">isActive</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#isToggled">isToggled</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#mimicClick">mimicClick</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#setActive">setActive</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#toggle">toggle</a></li></ul></details></li><li><details><summary>bento/managers/asset</summary><a href="module-bento_managers_asset.html">bento/managers/asset</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_asset.html#getAssetGroups">getAssetGroups</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getAssets">getAssets</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getAudio">getAudio</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getImage">getImage</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getImageElement">getImageElement</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getJson">getJson</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getSpine">getSpine</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getSpriteSheet">getSpriteSheet</a></li><li data-type='method'><a href="module-bento_managers_asset.html#hasAsset">hasAsset</a></li><li data-type='method'><a href="module-bento_managers_asset.html#load">load</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadAssetGroups">loadAssetGroups</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadAssetsJson">loadAssetsJson</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadAudioFromUrl">loadAudioFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadImageFromUrl">loadImageFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadJsonFromUrl">loadJsonFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#reload">reload</a></li><li data-type='method'><a href="module-bento_managers_asset.html#reload">reload</a></li><li data-type='method'><a href="module-bento_managers_asset.html#unload">unload</a></li></ul></details></li><li><details><summary>bento/managers/audio</summary><a href="module-bento_managers_audio.html">bento/managers/audio</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_audio.html#getVolume">getVolume</a></li><li data-type='method'><a href="module-bento_managers_audio.html#isPlayingMusic">isPlayingMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#muteMusic">muteMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#muteSound">muteSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#playMusic">playMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#playSound">playSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#preventSounds">preventSounds</a></li><li data-type='method'><a href="module-bento_managers_audio.html#setVolume">setVolume</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopAllMusic">stopAllMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopAllSound">stopAllSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopMusic">stopMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopSound">stopSound</a></li></ul></details></li><li><details><summary>bento/managers/input</summary><a href="module-bento_managers_input.html">bento/managers/input</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_input.html#getGamepadAxesLeft">getGamepadAxesLeft</a></li><li data-type='method'><a href="module-bento_managers_input.html#getGamepadAxesRight">getGamepadAxesRight</a></li><li data-type='method'><a href="module-bento_managers_input.html#getPointers">getPointers</a></li><li data-type='method'><a href="module-bento_managers_input.html#getRemoteAxes">getRemoteAxes</a></li><li data-type='method'><a href="module-bento_managers_input.html#isAnyGamepadButtonDown">isAnyGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isAnyKeyDown">isAnyKeyDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isGamepadButtonDown">isGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isGamepadButtonDown">isGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isKeyDown">isKeyDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isRemoteButtonDown">isRemoteButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#resetPointers">resetPointers</a></li><li data-type='method'><a href="module-bento_managers_input.html#resume">resume</a></li><li data-type='method'><a href="module-bento_managers_input.html#setOffset">setOffset</a></li><li data-type='method'><a href="module-bento_managers_input.html#setRemoteExitOnMenuPress">setRemoteExitOnMenuPress</a></li><li data-type='method'><a href="module-bento_managers_input.html#stop">stop</a></li><li data-type='method'><a href="module-bento_managers_input.html#updateCanvas">updateCanvas</a></li></ul></details></li><li><details><summary>bento/managers/object</summary><a href="module-bento_managers_object.html">bento/managers/object</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_object.html#attach">attach</a></li><li data-type='method'><a href="module-bento_managers_object.html#count">count</a></li><li data-type='method'><a href="module-bento_managers_object.html#draw">draw</a></li><li data-type='method'><a href="module-bento_managers_object.html#get">get</a></li><li data-type='method'><a href="module-bento_managers_object.html#getByFamily">getByFamily</a></li><li data-type='method'><a href="module-bento_managers_object.html#getByName">getByName</a></li><li data-type='method'><a href="module-bento_managers_object.html#getObjects">getObjects</a></li><li data-type='method'><a href="module-bento_managers_object.html#isPaused">isPaused</a></li><li data-type='method'><a href="module-bento_managers_object.html#pause">pause</a></li><li data-type='method'><a href="module-bento_managers_object.html#remove">remove</a></li><li data-type='method'><a href="module-bento_managers_object.html#removeAll">removeAll</a></li><li data-type='method'><a href="module-bento_managers_object.html#resume">resume</a></li><li data-type='method'><a href="module-bento_managers_object.html#run">run</a></li><li data-type='method'><a href="module-bento_managers_object.html#setSortMode">setSortMode</a></li><li data-type='method'><a href="module-bento_managers_object.html#stop">stop</a></li><li data-type='method'><a href="module-bento_managers_object.html#update">update</a></li></ul></details></li><li><details><summary>bento/managers/savestate</summary><a href="module-bento_managers_savestate.html">bento/managers/savestate</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_savestate.html#add">add</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#clear">clear</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#getId">getId</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#getStorage">getStorage</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#load">load</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#remove">remove</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#save">save</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#setId">setId</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#setStorage">setStorage</a></li></ul></details></li><li><details><summary>bento/managers/screen</summary><a href="module-bento_managers_screen.html">bento/managers/screen</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_screen.html#add">add</a></li><li data-type='method'><a href="module-bento_managers_screen.html#getCurrentScreen">getCurrentScreen</a></li><li data-type='method'><a href="module-bento_managers_screen.html#hide">hide</a></li><li data-type='method'><a href="module-bento_managers_screen.html#reset">reset</a></li><li data-type='method'><a href="module-bento_managers_screen.html#show">show</a></li></ul></details></li><li><details><summary>bento/math/array2d</summary><a href="module-bento_math_array2d.html">bento/math/array2d</a><ul class='methods'><li data-type='method'><a href="module-bento_math_array2d.html#get">get</a></li><li data-type='method'><a href="module-bento_math_array2d.html#isArray2d">isArray2d</a></li><li data-type='method'><a href="module-bento_math_array2d.html#iterate">iterate</a></li><li data-type='method'><a href="module-bento_math_array2d.html#set">set</a></li></ul></details></li><li><details><summary>bento/math/polygon</summary><a href="module-bento_math_polygon.html">bento/math/polygon</a><ul class='methods'><li data-type='method'><a href="module-bento_math_polygon.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_polygon.html#getBoundingBox">getBoundingBox</a></li><li data-type='method'><a href="module-bento_math_polygon.html#hasPosition">hasPosition</a></li><li data-type='method'><a href="module-bento_math_polygon.html#intersect">intersect</a></li><li data-type='method'><a href="module-bento_math_polygon.html#isPolygon">isPolygon</a></li><li data-type='method'><a href="module-bento_math_polygon.html#offset">offset</a></li></ul></details></li><li><details><summary>bento/math/rectangle</summary><a href="module-bento_math_rectangle.html">bento/math/rectangle</a><ul class='methods'><li data-type='method'><a href="module-bento_math_rectangle.html#.copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getCenter">getCenter</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getCorner">getCorner</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getExtents">getExtents</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getSize">getSize</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getX2">getX2</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getY2">getY2</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#grow">grow</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#hasPosition">hasPosition</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersect">intersect</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersection">intersection</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersectsCircle">intersectsCircle</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersectsLine">intersectsLine</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#isRectangle">isRectangle</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#offset">offset</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#union">union</a></li></ul></details></li><li><details><summary>bento/math/transformmatrix</summary><a href="module-bento_math_transformmatrix.html">bento/math/transformmatrix</a><ul class='methods'><li data-type='method'><a href="module-bento_math_transformmatrix.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#multiply">multiply</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#multiplyWith">multiplyWith</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#multiplyWithVector">multiplyWithVector</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#prepend">prepend</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#reset">reset</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#rotate">rotate</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#scale">scale</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#translate">translate</a></li></ul></details></li><li><details><summary>bento/math/vector2</summary><a href="module-bento_math_vector2.html">bento/math/vector2</a><ul class='methods'><li data-type='method'><a href="module-bento_math_vector2.html#add">add</a></li><li data-type='method'><a href="module-bento_math_vector2.html#addTo">addTo</a></li><li data-type='method'><a href="module-bento_math_vector2.html#angle">angle</a></li><li data-type='method'><a href="module-bento_math_vector2.html#angleBetween">angleBetween</a></li><li data-type='method'><a href="module-bento_math_vector2.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_vector2.html#copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_vector2.html#distance">distance</a></li><li data-type='method'><a href="module-bento_math_vector2.html#divide">divide</a></li><li data-type='method'><a href="module-bento_math_vector2.html#divideBy">divideBy</a></li><li data-type='method'><a href="module-bento_math_vector2.html#dotProduct">dotProduct</a></li><li data-type='method'><a href="module-bento_math_vector2.html#isCloserThan">isCloserThan</a></li><li data-type='method'><a href="module-bento_math_vector2.html#isFartherThan">isFartherThan</a></li><li data-type='method'><a href="module-bento_math_vector2.html#magnitude">magnitude</a></li><li data-type='method'><a href="module-bento_math_vector2.html#multiply">multiply</a></li><li data-type='method'><a href="module-bento_math_vector2.html#multiplyWith">multiplyWith</a></li><li data-type='method'><a href="module-bento_math_vector2.html#normalize">normalize</a></li><li data-type='method'><a href="module-bento_math_vector2.html#reflect">reflect</a></li><li data-type='method'><a href="module-bento_math_vector2.html#rotateDegree">rotateDegree</a></li><li data-type='method'><a href="module-bento_math_vector2.html#rotateRadian">rotateRadian</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scalarMultiply">scalarMultiply</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scalarMultiplyWith">scalarMultiplyWith</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scale">scale</a></li><li data-type='method'><a href="module-bento_math_vector2.html#sqrMagnitude">sqrMagnitude</a></li><li data-type='method'><a href="module-bento_math_vector2.html#subtract">subtract</a></li><li data-type='method'><a href="module-bento_math_vector2.html#subtractFrom">subtractFrom</a></li><li data-type='method'><a href="module-bento_math_vector2.html#.copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_vector2.html#.fromRotation">fromRotation</a></li></ul></details></li><li><details><summary>bento/objectpool</summary><a href="module-bento_objectpool.html">bento/objectpool</a><ul class='methods'><li data-type='method'><a href="module-bento_objectpool.html#~discard">discard</a></li><li data-type='method'><a href="module-bento_objectpool.html#~get">get</a></li></ul></details></li><li><details><summary>bento/packedimage</summary><a href="module-bento_packedimage.html">bento/packedimage</a></details></li><li><details><summary>bento/screen</summary><a href="module-bento_screen.html">bento/screen</a><ul class='methods'><li data-type='method'><a href="module-bento_screen.html#loadTiled">loadTiled</a></li><li data-type='method'><a href="module-bento_screen.html#onHide">onHide</a></li><li data-type='method'><a href="module-bento_screen.html#onShow">onShow</a></li></ul></details></li><li><details><summary>bento/sortedeventsystem</summary><a href="module-bento_sortedeventsystem.html">bento/sortedeventsystem</a><ul class='methods'><li data-type='method'><a href="module-bento_sortedeventsystem.html#off">off</a></li><li data-type='method'><a href="module-bento_sortedeventsystem.html#on">on</a></li></ul></details></li><li><details><summary>bento/tiled</summary><a href="module-bento_tiled.html">bento/tiled</a></details></li><li><details><summary>bento/tiledreader</summary><a href="module-bento_tiledreader.html">bento/tiledreader</a><ul class='methods'><li data-type='method'><a href="module-bento_tiledreader.html#read">read</a></li></ul></details></li><li><details><summary>bento/tween</summary><a href="module-bento_tween.html">bento/tween</a><ul class='methods'><li data-type='method'><a href="module-bento_tween.html#begin">begin</a></li><li data-type='method'><a href="module-bento_tween.html#pause">pause</a></li><li data-type='method'><a href="module-bento_tween.html#removeSelf">removeSelf</a></li><li data-type='method'><a href="module-bento_tween.html#resume">resume</a></li><li data-type='method'><a href="module-bento_tween.html#stop">stop</a></li></ul></details></li><li><details><summary>bento/utils</summary><a href="module-bento_utils.html">bento/utils</a><ul class='methods'><li data-type='method'><a href="module-bento_utils.html#approach">approach</a></li><li data-type='method'><a href="module-bento_utils.html#checksum">checksum</a></li><li data-type='method'><a href="module-bento_utils.html#clamp">clamp</a></li><li data-type='method'><a href="module-bento_utils.html#cloneJson">cloneJson</a></li><li data-type='method'><a href="module-bento_utils.html#copyObject">copyObject</a></li><li data-type='method'><a href="module-bento_utils.html#extend">extend</a></li><li data-type='method'><a href="module-bento_utils.html#forEach">forEach</a></li><li data-type='method'><a href="module-bento_utils.html#getDefault">getDefault</a></li><li data-type='method'><a href="module-bento_utils.html#getKeyLength">getKeyLength</a></li><li data-type='method'><a href="module-bento_utils.html#getRandom">getRandom</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomFloat">getRandomFloat</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomRange">getRandomRange</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomRangeFloat">getRandomRangeFloat</a></li><li data-type='method'><a href="module-bento_utils.html#getScreenSize">getScreenSize</a></li><li data-type='method'><a href="module-bento_utils.html#isAmazonDevice">isAmazonDevice</a></li><li data-type='method'><a href="module-bento_utils.html#isAndroid">isAndroid</a></li><li data-type='method'><a href="module-bento_utils.html#isAndroidDevice">isAndroidDevice</a></li><li data-type='method'><a href="module-bento_utils.html#isApple">isApple</a></li><li data-type='method'><a href="module-bento_utils.html#isArray">isArray</a></li><li data-type='method'><a href="module-bento_utils.html#isBetween">isBetween</a></li><li data-type='method'><a href="module-bento_utils.html#isBoolean">isBoolean</a></li><li data-type='method'><a href="module-bento_utils.html#isCocoonJs">isCocoonJs</a></li><li data-type='method'><a href="module-bento_utils.html#isDefined">isDefined</a></li><li data-type='method'><a href="module-bento_utils.html#isDev">isDev</a></li><li data-type='method'><a href="module-bento_utils.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-bento_utils.html#isFunction">isFunction</a></li><li data-type='method'><a href="module-bento_utils.html#isInt">isInt</a></li><li data-type='method'><a href="module-bento_utils.html#isIosDevice">isIosDevice</a></li><li data-type='method'><a href="module-bento_utils.html#isMobileBrowser">isMobileBrowser</a></li><li data-type='method'><a href="module-bento_utils.html#isNativeAndroid">isNativeAndroid</a></li><li data-type='method'><a href="module-bento_utils.html#isNativeIos">isNativeIos</a></li><li data-type='method'><a href="module-bento_utils.html#isNotEmpty">isNotEmpty</a></li><li data-type='method'><a href="module-bento_utils.html#isNumber">isNumber</a></li><li data-type='method'><a href="module-bento_utils.html#isObject">isObject</a></li><li data-type='method'><a href="module-bento_utils.html#isString">isString</a></li><li data-type='method'><a href="module-bento_utils.html#isUndefined">isUndefined</a></li><li data-type='method'><a href="module-bento_utils.html#log">log</a></li><li data-type='method'><a href="module-bento_utils.html#modulo">modulo</a></li><li data-type='method'><a href="module-bento_utils.html#pickRandom">pickRandom</a></li><li data-type='method'><a href="module-bento_utils.html#pickRandomFrom">pickRandomFrom</a></li><li data-type='method'><a href="module-bento_utils.html#removeFromArray">removeFromArray</a></li><li data-type='method'><a href="module-bento_utils.html#repeat">repeat</a></li><li data-type='method'><a href="module-bento_utils.html#setDev">setDev</a></li><li data-type='method'><a href="module-bento_utils.html#sign">sign</a></li><li data-type='method'><a href="module-bento_utils.html#toDegree">toDegree</a></li><li data-type='method'><a href="module-bento_utils.html#toRadian">toRadian</a></li></ul></details></li></ul><h3>Global</h3><ul><li><a href="global.html#bento">bento</a></li><li><a href="global.html">bento define</a></li><li><a href="global.html">bento require</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">managers/input.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Manager that tracks mouse/touch and keyboard input. Useful for manual input managing.
 * &lt;br>Exports: Constructor, can be accessed through Bento.input namespace.
 * @module bento/managers/input
 * @moduleName InputManager
 * @param {Object} gameData - gameData
 * @param {Vector2} gameData.canvasScale - Reference to the current canvas scale.
 * @param {HtmlCanvas} gameData.canvas - Reference to the canvas element.
 * @param {Rectangle} gameData.viewport - Reference to viewport.
 * @param {Object} settings - settings passed from Bento.setup
 * @param {Boolean} [settings.preventContextMenu] - Prevents right click menu
 * @param {Boolean} [settings.globalMouseUp] - Catch mouseup events outside canvas (only useful for desktop)
 * @returns InputManager
 */
bento.define('bento/managers/input', [
    'bento/utils',
    'bento/math/vector2',
    'bento/eventsystem'
], function (Utils, Vector2, EventSystem) {
    'use strict';
    var startPositions = {};
    return function (gameData, settings) {
        var isPaused = false,
            isListening = false,
            canvas,
            canvasScale,
            viewport,
            pointers = [],
            keyStates = {},
            offsetLeft = 0,
            offsetTop = 0,
            offsetLocal = new Vector2(0, 0),
            gamepad,
            gamepads,
            gamepadButtonsPressed = [],
            gamepadButtonStates = {},
            remote,
            remoteButtonsPressed = [],
            remoteButtonStates = {},
            pointerDown = function (evt) {
                pointers.push({
                    id: evt.id,
                    position: evt.position,
                    eventType: evt.eventType,
                    localPosition: evt.localPosition,
                    worldPosition: evt.worldPosition
                });
                EventSystem.fire('pointerDown', evt);
            },
            pointerMove = function (evt) {
                EventSystem.fire('pointerMove', evt);
                updatePointer(evt);
            },
            pointerUp = function (evt) {
                EventSystem.fire('pointerUp', evt);
                removePointer(evt);
            },
            touchStart = function (evt) {
                var id, i, l;
                evt.preventDefault();
                for (i = 0, l = evt.changedTouches.length; i &lt; l; ++i) {
                    addTouchPosition(evt, i, 'start');
                    pointerDown(evt);
                }
            },
            touchMove = function (evt) {
                var id, i, l;
                evt.preventDefault();
                for (i = 0, l = evt.changedTouches.length; i &lt; l; ++i) {
                    addTouchPosition(evt, i, 'move');
                    pointerMove(evt);
                }
            },
            touchEnd = function (evt) {
                var id, i, l;
                evt.preventDefault();
                for (i = 0, l = evt.changedTouches.length; i &lt; l; ++i) {
                    addTouchPosition(evt, i, 'end');
                    pointerUp(evt);
                }
            },
            mouseDown = function (evt) {
                // evt.preventDefault();
                addMousePosition(evt, 'start');
                pointerDown(evt);
            },
            mouseMove = function (evt) {
                // evt.preventDefault();
                addMousePosition(evt, 'move');
                pointerMove(evt);
            },
            mouseUp = function (evt) {
                // evt.preventDefault();
                addMousePosition(evt, 'end');
                pointerUp(evt);
            },
            addTouchPosition = function (evt, n, type) {
                var touch = evt.changedTouches[n];
                var hasBoundingClientRect = (evt.target &amp;&amp; evt.target.getBoundingClientRect);
                var x, y;
                if (hasBoundingClientRect) {
                    // https://stackoverflow.com/a/42111623 --> more accurate?
                    var rect = evt.target.getBoundingClientRect();
                    x = (touch.pageX - rect.left) / canvasScale.x + offsetLocal.x;
                    y = (touch.pageY - rect.top) / canvasScale.y + offsetLocal.y;
                } else {
                    x = (touch.pageX - offsetLeft) / canvasScale.x + offsetLocal.x;
                    y = (touch.pageY - offsetTop) / canvasScale.y + offsetLocal.y;
                }
                var startPos = {};

                evt.preventDefault();
                evt.id = 0;
                evt.eventType = 'touch';
                touch.position = new Vector2(x, y);
                touch.worldPosition = touch.position.clone();
                touch.worldPosition.x += viewport.x;
                touch.worldPosition.y += viewport.y;
                touch.localPosition = touch.position.clone();
                // add 'normal' position
                evt.position = touch.position.clone();
                evt.worldPosition = touch.worldPosition.clone();
                evt.localPosition = touch.localPosition.clone();
                // id
                evt.id = touch.identifier + 1;
                // diff position
                if (type === 'start') {
                    startPos.startPosition = touch.position.clone();
                    startPos.startWorldPosition = touch.worldPosition.clone();
                    startPos.startLocalPosition = touch.localPosition.clone();
                    // save startPos
                    startPositions[evt.id] = startPos;
                }
                if (type === 'end') {
                    // load startPos
                    startPos = startPositions[evt.id];
                    if (startPos &amp;&amp; startPos.startPosition) {
                        touch.diffPosition = touch.position.subtract(startPos.startPosition);
                        touch.diffWorldPosition = touch.worldPosition.subtract(startPos.startWorldPosition);
                        touch.diffLocalPosition = touch.localPosition.subtract(startPos.startLocalPosition);
                        evt.diffPosition = touch.diffPosition.clone();
                        evt.diffWorldPosition = touch.diffWorldPosition.clone();
                        evt.diffLocalPosition = touch.diffLocalPosition.clone();
                        delete startPositions[evt.id];
                    } else {
                        Utils.log("ERROR: touch startPosition was not defined");
                    }
                }

            },
            addMousePosition = function (evt, type) {
                var hasBoundingClientRect = (evt.target &amp;&amp; evt.target.getBoundingClientRect);
                var x, y;
                if (hasBoundingClientRect) {
                    // https://stackoverflow.com/a/42111623 --> more accurate?
                    var rect = evt.target.getBoundingClientRect();
                    x = (evt.clientX - rect.left) / canvasScale.x + offsetLocal.x;
                    y = (evt.clientY - rect.top) / canvasScale.y + offsetLocal.y;
                } else {
                    x = (evt.pageX - offsetLeft) / canvasScale.x + offsetLocal.x;
                    y = (evt.pageY - offsetTop) / canvasScale.y + offsetLocal.y;
                }
                var startPos = {};
                var n = -1;
                evt.id = 0;
                evt.eventType = 'mouse';
                evt.position = new Vector2(x, y);
                evt.worldPosition = evt.position.clone();
                evt.worldPosition.x += viewport.x;
                evt.worldPosition.y += viewport.y;
                evt.localPosition = evt.position.clone();
                // diff position
                if (type === 'start') {
                    startPos.startPosition = evt.position.clone();
                    startPos.startWorldPosition = evt.worldPosition.clone();
                    startPos.startLocalPosition = evt.localPosition.clone();
                    // save startPos
                    startPositions[n] = startPos;
                }
                if (type === 'end') {
                    // load startPos
                    startPos = startPositions[n];
                    evt.diffPosition = evt.position.substract(startPos.startPosition);
                    evt.diffWorldPosition = evt.worldPosition.substract(startPos.startWorldPosition);
                    evt.diffLocalPosition = evt.localPosition.substract(startPos.startLocalPosition);
                }
                // give it an id that doesn't clash with touch id
                evt.id = -1;
            },
            updatePointer = function (evt) {
                var i = 0, l;
                for (i = 0, l = pointers.length; i &lt; l; ++i) {
                    if (pointers[i].id === evt.id) {
                        pointers[i].position = evt.position;
                        pointers[i].worldPosition = evt.worldPosition;
                        pointers[i].localPosition = evt.position;
                        return;
                    }
                }
            },
            removePointer = function (evt) {
                var i = 0, l;
                for (i = 0, l = pointers.length; i &lt; l; ++i) {
                    if (pointers[i].id === evt.id) {
                        pointers.splice(i, 1);
                        return;
                    }
                }
            },
            initTouch = function () {
                if (window.ejecta) {
                    canvas.addEventListener('tvtouchstart', tvTouchStart);
                    canvas.addEventListener('tvtouchmove', tvTouchMove);
                    canvas.addEventListener('tvtouchend', tvTouchEnd);
                }
                canvas.addEventListener('touchstart', touchStart);
                canvas.addEventListener('touchmove', touchMove);
                canvas.addEventListener('touchend', touchEnd);
                if (settings.globalMouseUp) {
                    // TODO: add correction for position
                    window.addEventListener('mouseup', mouseUp);
                } else {
                    canvas.addEventListener('mouseup', mouseUp);
                }
                canvas.addEventListener('mousedown', mouseDown);
                canvas.addEventListener('mousemove', mouseMove);
                isListening = true;

                if (!Utils.isCocoonJs()) {
                    canvas.addEventListener('touchstart', function (evt) {
                        if (evt &amp;&amp; evt.preventDefault) {
                            evt.preventDefault();
                        }
                        if (evt &amp;&amp; evt.stopPropagation) {
                            evt.stopPropagation();
                        }
                        return false;
                    });
                    canvas.addEventListener('touchmove', function (evt) {
                        if (evt &amp;&amp; evt.preventDefault) {
                            evt.preventDefault();
                        }
                        if (evt &amp;&amp; evt.stopPropagation) {
                            evt.stopPropagation();
                        }
                        return false;
                    });
                }

                // touchcancel can be used when system interveness with the game
                canvas.addEventListener('touchcancel', function (evt) {
                    EventSystem.fire('touchcancel', evt);
                });
            },
            initKeyboard = function () {
                var element = gameData.canvas || window,
                    refocus = function (evt) {
                        if (element.focus) {
                            element.focus();
                        }
                    };
                // fix for iframes
                element.tabIndex = 0;
                if (element.focus) {
                    element.focus();
                }
                element.addEventListener('keydown', keyDown, false);
                element.addEventListener('keyup', keyUp, false);
                // refocus
                element.addEventListener('mousedown', refocus, false);

            },
            keyDown = function (evt) {
                var i, l, names;
                evt.preventDefault();
                EventSystem.fire('keyDown', evt);
                // get names
                names = Utils.keyboardMapping[evt.keyCode];
                // catch unknown keys
                if (!names) {
                    Utils.log("ERROR: Key with keyCode " + evt.keyCode + " is undefined.");
                    return;
                }
                for (i = 0, l = names.length; i &lt; l; ++i) {
                    keyStates[names[i]] = true;
                    EventSystem.fire('buttonDown', names[i]);
                    EventSystem.fire('buttonDown-' + names[i]);
                }
            },
            keyUp = function (evt) {
                var i, l, names;
                evt.preventDefault();
                EventSystem.fire('keyUp', evt);
                // get names
                names = Utils.keyboardMapping[evt.keyCode];
                // catch unknown keys
                if (!names) {
                    Utils.log("ERROR: Key with keyCode " + evt.keyCode + " is undefined.");
                    return;
                }
                for (i = 0, l = names.length; i &lt; l; ++i) {
                    keyStates[names[i]] = false;
                    EventSystem.fire('buttonUp', names[i]);
                    EventSystem.fire('buttonUp-' + names[i]);
                }
            },
            destroy = function () {
                // remove all event listeners
            },
            /**
             * Changes the offsets after resizing or screen re-orientation.
             */
            updateCanvas = function () {
                var screenSize = Utils.getScreenSize();
                if (Utils.isCocoonJs()) {
                    // assumes full screen
                    canvasScale.x = screenSize.width / viewport.width;
                    canvasScale.y = screenSize.height / viewport.height;
                } else {
                    // use offsetWidth and offsetHeight to determine visual size
                    canvasScale.x = canvas.offsetWidth / viewport.width;
                    canvasScale.y = canvas.offsetHeight / viewport.height;
                    // get the topleft position
                    offsetLeft = canvas.offsetLeft;
                    offsetTop = canvas.offsetTop;
                }
            },
            initMouseClicks = function () {
                if (!canvas || !canvas.addEventListener) {
                    return;
                }
                canvas.addEventListener('contextmenu', function (e) {
                    EventSystem.fire('mouseDown-right');
                    // prevent context menu
                    if (settings.preventContextMenu) {
                        e.preventDefault();
                    }
                }, false);
                canvas.addEventListener('click', function (e) {
                    if (e.which === 1) {
                        EventSystem.fire('mouseDown-left');
                        e.preventDefault();
                    } else if (e.which === 2) {
                        EventSystem.fire('mouseDown-middle');
                        e.preventDefault();
                    }
                }, false);
            },
            /**
             * Adds event listeners for connecting/disconnecting a gamepad
             */
            initGamepad = function () {
                window.addEventListener('gamepadconnected', gamepadConnected);
                window.addEventListener('gamepaddisconnected', gamepadDisconnected);
            },
            /**
             * Fired when the browser detects that a gamepad has been connected or the first time a button/axis of the gamepad is used.
             * Adds a pre-update loop check for gamepads and gamepad input
             * @param {GamepadEvent} evt
             */
            gamepadConnected = function (evt) {
                // check for button input before the regular update
                EventSystem.on('preUpdate', checkGamepad);

                console.log('Gamepad connected:', evt.gamepad);
            },
            /**
             * Fired when the browser detects that a gamepad has been disconnected.
             * Removes the reference to the gamepad
             * @param {GamepadEvent} evt
             */
            gamepadDisconnected = function (evt) {
                gamepad = undefined;

                // stop checking for button input
                EventSystem.off('preUpdate', checkGamepad);
            },
            /**
             * Gets a list of all gamepads and checks if any buttons are pressed.
             */
            checkGamepad = function () {
                var i = 0,
                    len = 0;

                // get gamepad every frame because Chrome doesn't store a reference to the gamepad's state
                gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);
                for (i = 0, len = gamepads.length; i &lt; len; ++i) {
                    if (gamepads[i]) {
                        gamepad = gamepads[i];
                    }
                }

                if (!gamepad)
                    return;

                // uses an array to check against the state of the buttons from the previous frame
                for (i = 0, len = gamepad.buttons.length; i &lt; len; ++i) {
                    if (gamepad.buttons[i].pressed !== gamepadButtonsPressed[i]) {
                        if (gamepad.buttons[i].pressed) {
                            gamepadButtonDown(i);
                        } else {
                            gamepadButtonUp(i);
                        }
                    }
                }
            },
            gamepadButtonDown = function (id) {
                var i = 0,
                    names = Utils.gamepadMapping[id],
                    len = 0;

                // confusing name is used to keep the terminology similar to keyDown/keyUp
                EventSystem.fire('gamepadKeyDown', id);
                // save value in array
                gamepadButtonsPressed[id] = true;

                for (i = 0, len = names.length; i &lt; len; ++i) {
                    gamepadButtonStates[names[i]] = true;
                    EventSystem.fire('gamepadButtonDown', names[i]);
                    EventSystem.fire('gamepadButtonDown-' + names[i]);
                }
            },
            gamepadButtonUp = function (id) {
                var i = 0,
                    names = Utils.gamepadMapping[id],
                    len = 0;

                // confusing name is used to keep the terminology similar to keyDown/keyUp
                EventSystem.fire('gamepadKeyUp', id);
                // save value in array
                gamepadButtonsPressed[id] = false;

                for (i = 0, len = names.length; i &lt; len; ++i) {
                    gamepadButtonStates[names[i]] = false;
                    EventSystem.fire('gamepadButtonUp', names[i]);
                }
            },
            /**
             * Adds a check for input from the apple remote before every update. Only if on tvOS.
             *
             * Ejecta (at least in version 2.0) doesn't have event handlers for button input, so
             * continually checking for input is the only way for now.
             */
            initRemote = function () {
                var i = 0, l,
                    tvOSGamepads;

                if (window.ejecta) {
                    // get all connected gamepads
                    tvOSGamepads = navigator.getGamepads();
                    // find apple remote gamepad
                    for (i = 0, l = tvOSGamepads.length; i &lt; l; ++i)
                        if (tvOSGamepads[i] &amp;&amp; tvOSGamepads[i].profile === 'microGamepad')
                            remote = tvOSGamepads[i];

                    for (i = 0, l = remote.buttons.length; i &lt; l; ++i)
                        remoteButtonsPressed.push(remote.buttons[i].pressed);

                    // check for button input before the regular update
                    EventSystem.on('preUpdate', checkRemote);
                }
            },
            /**
             * Checks if a remote button has been pressed. Runs before every frame, if added.
             */
            checkRemote = function () {
                var i = 0,
                    len = 0;

                // uses an array to check against the state of the buttons from the previous frame
                for (i = 0, len = remote.buttons.length; i &lt; len; ++i) {
                    if (remote.buttons[i].pressed !== remoteButtonsPressed[i]) {
                        if (remote.buttons[i].pressed) {
                            remoteButtonDown(i);
                        } else {
                            remoteButtonUp(i);
                        }
                    }
                }
            },
            remoteButtonDown = function (id) {
                var i = 0, l,
                    names = Utils.remoteMapping[id];
                // save value in array
                remoteButtonsPressed[id] = true;

                for (i = 0, l = names.length; i &lt; l; ++i)
                    remoteButtonStates[names[i]] = true;
            },
            remoteButtonUp = function (id) {
                var i = 0, l,
                    names = Utils.remoteMapping[id];
                // save value in array
                remoteButtonsPressed[id] = false;

                for (i = 0, l = names.length; i &lt; l; ++i)
                    remoteButtonStates[names[i]] = false;
            },
            tvPointerDown = function (evt) {
                pointers.push({
                    id: evt.id,
                    position: evt.position,
                    eventType: evt.eventType,
                    localPosition: evt.localPosition,
                    worldPosition: evt.worldPosition
                });
                EventSystem.fire('tvPointerDown', evt);
            },
            tvPointerMove = function (evt) {
                EventSystem.fire('tvPointerMove', evt);
                updatePointer(evt);
            },
            tvPointerUp = function (evt) {
                EventSystem.fire('tvPointerUp', evt);
                removePointer(evt);
            },
            tvTouchStart = function (evt) {
                var id, i, l;
                evt.preventDefault();
                for (i = 0, l = evt.changedTouches.length; i &lt; l; ++i) {
                    addTvTouchPosition(evt, i, 'start');
                    tvPointerDown(evt);
                }
            },
            tvTouchMove = function (evt) {
                var id, i, l;
                evt.preventDefault();
                for (i = 0, l = evt.changedTouches.length; i &lt; l; ++i) {
                    addTvTouchPosition(evt, i, 'move');
                    tvPointerMove(evt);
                }
            },
            tvTouchEnd = function (evt) {
                var id, i, l;
                evt.preventDefault();
                for (i = 0, l = evt.changedTouches.length; i &lt; l; ++i) {
                    addTvTouchPosition(evt, i, 'end');
                    tvPointerUp(evt);
                }
            },
            addTvTouchPosition = function (evt, n, type) {
                var touch = evt.changedTouches[n],
                    x = (touch.pageX - offsetLeft) / canvasScale.x + offsetLocal.x,
                    y = (touch.pageY - offsetTop) / canvasScale.y + offsetLocal.y,
                    startPos = {};

                evt.preventDefault();
                evt.id = 0;
                evt.eventType = 'tvtouch';
                touch.position = new Vector2(x, y);
                touch.worldPosition = touch.position.clone();
                touch.worldPosition.x += viewport.x;
                touch.worldPosition.y += viewport.y;
                touch.localPosition = touch.position.clone();
                // add 'normal' position
                evt.position = touch.position.clone();
                evt.worldPosition = touch.worldPosition.clone();
                evt.localPosition = touch.localPosition.clone();
                // id
                evt.id = touch.identifier + 1;
                // diff position
                if (type === 'start') {
                    startPos.startPosition = touch.position.clone();
                    startPos.startWorldPosition = touch.worldPosition.clone();
                    startPos.startLocalPosition = touch.localPosition.clone();
                    // save startPos
                    startPositions[evt.id] = startPos;
                }
                if (type === 'end') {
                    // load startPos
                    startPos = startPositions[evt.id];
                    if (startPos &amp;&amp; startPos.startPosition) {
                        touch.diffPosition = touch.position.substract(startPos.startPosition);
                        touch.diffWorldPosition = touch.worldPosition.substract(startPos.startWorldPosition);
                        touch.diffLocalPosition = touch.localPosition.substract(startPos.startLocalPosition);
                        evt.diffPosition = touch.diffPosition.clone();
                        evt.diffWorldPosition = touch.diffWorldPosition.clone();
                        evt.diffLocalPosition = touch.diffLocalPosition.clone();
                        delete startPositions[evt.id];
                    } else {
                        Utils.log("ERROR: touch startPosition was not defined");
                    }
                }
            };

        if (!gameData) {
            throw 'Supply a gameData object';
        }
        // canvasScale is needed to take css scaling into account
        canvasScale = gameData.canvasScale;
        canvas = gameData.canvas;
        viewport = gameData.viewport;

        // TODO: it's a bit tricky with order of event listeners
        if (canvas) {
            window.addEventListener('resize', updateCanvas, false);
            window.addEventListener('orientationchange', updateCanvas, false);
            updateCanvas();
        }

        // touch device
        initTouch();
        // keyboard
        initKeyboard();
        // init clicks
        initMouseClicks();
        // apple remote (only on tvOS)
        initRemote();
        // start listening for gamepads
        initGamepad();

        return {
            /**
             * Returns all current pointers down
             * @function
             * @instance
             * @returns {Array} pointers - Array with pointer positions
             * @name getPointers
             */
            getPointers: function () {
                return pointers;
            },
            /**
             * Removes all current pointers down
             * @function
             * @instance
             * @name resetPointers
             */
            resetPointers: function () {
                pointers.length = 0;
            },
            /**
             * Checks if a keyboard key is down
             * @function
             * @instance
             * @param {String} name - name of the key
             * @returns {Boolean} Returns true if the provided key is down.
             * @name isKeyDown
             */
            isKeyDown: function (name) {
                return keyStates[name] || false;
            },
            /**
             * Checks if any keyboard key is pressed
             * @function
             * @instance
             * @returns {Boolean} Returns true if any provided key is down.
             * @name isAnyKeyDown
             */
            isAnyKeyDown: function () {
                var state;

                for (state in keyStates)
                    if (keyStates[state])
                        return true;

                return false;
            },
            /**
             * Is the gamepad connected?
             * @function
             * @instance
             * @returns {Boolean} Returns true if gamepad is connected, false otherwise.
             * @name isGamepadButtonDown
             */
            isGamepadConnected: function () {
                if (gamepad)
                    return true;
                else
                    return false;
            },
            /**
             * Checks if a gamepad button is down
             * @function
             * @instance
             * @param {String} name - name of the button
             * @returns {Boolean} Returns true if the provided button is down.
             * @name isGamepadButtonDown
             */
            isGamepadButtonDown: function (name) {
                return gamepadButtonStates[name] || false;
            },
            /**
             * Checks if any gamepad button is pressed
             * @function
             * @instance
             * @returns {Boolean} Returns true if any button is down.
             * @name isAnyGamepadButtonDown
             */
            isAnyGamepadButtonDown: function () {
                var state;

                for (state in gamepadButtonStates)
                    if (gamepadButtonStates[state])
                        return true;

                return false;
            },
            /**
             * Returns the current float values of the x and y axes of left thumbstick
             * @function
             * @instance
             * @returns {Vector2} Values range from (-1, -1) in the top left to (1, 1) in the bottom right.
             * @name getGamepadAxesLeft
             */
            getGamepadAxesLeft: function () {
                return new Vector2(gamepad.axes[0], gamepad.axes[1]);
            },
            /**
             * Returns the current float values of the x and y axes of right thumbstick
             * @function
             * @instance
             * @returns {Vector2} Values range from (-1, -1) in the top left to (1, 1) in the bottom right.
             * @name getGamepadAxesRight
             */
            getGamepadAxesRight: function () {
                return new Vector2(gamepad.axes[2], gamepad.axes[3]);
            },
            /**
             * Checks if a remote button is down
             * @function
             * @instance
             * @param {String} name - name of the button
             * @returns {Boolean} Returns true if the provided button is down.
             * @name isRemoteButtonDown
             */
            isRemoteButtonDown: function (name) {
                return remoteButtonStates[name] || false;
            },
            /**
             * Defines if pressing 'menu' button will go back to Apple TV home screen
             * @function
             * @instance
             * @param {Boolean} Set to false if you want to assign custom behaviour for the 'menu' button
             * @name setRemoteExitOnMenuPress
             */
            setRemoteExitOnMenuPress: function (bool) {
                remote.exitOnMenuPress = bool;
            },
            /**
             * Returns the current float values of the x and y axes of the touch area
             * @function
             * @instance
             * @returns {Vector2} Values range from (-1, -1) in the top left to (1, 1) in the bottom right.
             * @name getRemoteAxes
             */
            getRemoteAxes: function () {
                return new Vector2(remote.axes[0], remote.axes[1]);
            },
            /**
             * Stop all pointer input
             * @function
             * @instance
             * @name stop
             */
            stop: function () {
                if (!isListening) {
                    return;
                }
                if (window.ejecta) {
                    canvas.removeEventListener('tvtouchstart', tvTouchStart);
                    canvas.removeEventListener('tvtouchmove', tvTouchMove);
                    canvas.removeEventListener('tvtouchend', tvTouchEnd);
                }
                canvas.removeEventListener('touchstart', touchStart);
                canvas.removeEventListener('touchmove', touchMove);
                canvas.removeEventListener('touchend', touchEnd);
                canvas.removeEventListener('mousedown', mouseDown);
                canvas.removeEventListener('mousemove', mouseMove);
                if (settings.globalMouseUp) {
                    window.removeEventListener('mouseup', mouseUp);
                } else {
                    canvas.removeEventListener('mouseup', mouseUp);
                }

                isListening = false;
            },
            /**
             * Resumes all pointer input
             * @function
             * @instance
             * @name resume
             */
            resume: function () {
                if (isListening) {
                    return;
                }
                if (window.ejecta) {
                    canvas.addEventListener('tvtouchstart', tvTouchStart);
                    canvas.addEventListener('tvtouchmove', tvTouchMove);
                    canvas.addEventListener('tvtouchend', tvTouchEnd);
                }
                canvas.addEventListener('touchstart', touchStart);
                canvas.addEventListener('touchmove', touchMove);
                canvas.addEventListener('touchend', touchEnd);
                canvas.addEventListener('mousedown', mouseDown);
                canvas.addEventListener('mousemove', mouseMove);
                if (settings.globalMouseUp) {
                    window.addEventListener('mouseup', mouseUp);
                } else {
                    canvas.addEventListener('mouseup', mouseUp);
                }

                isListening = true;
            },
            /**
             * Changes the offsets after resizing or screen re-orientation.
             * @function
             * @instance
             * @name updateCanvas
             */
            updateCanvas: updateCanvas,
            /**
             * Adds an offset to all pointer input
             * Note that this is in local space
             * @function
             * @instance
             * @param {Vector2} offset - Offset as Vector2
             * @name setOffset
             */
            setOffset: function (offset) {
                offsetLocal = offset;
            }
        };
    };
});</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/opennav.js"></script>
</body>
</html>
