<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>entity.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/bento.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><details><summary>bento</summary><a href="module-bento.html">bento</a><ul class='methods'><li data-type='method'><a href="module-bento.html#createCanvas">createCanvas</a></li><li data-type='method'><a href="module-bento.html#getAntiAlias">getAntiAlias</a></li><li data-type='method'><a href="module-bento.html#getCanvas">getCanvas</a></li><li data-type='method'><a href="module-bento.html#getGameData">getGameData</a></li><li data-type='method'><a href="module-bento.html#getGameSpeed">getGameSpeed</a></li><li data-type='method'><a href="module-bento.html#getRenderer">getRenderer</a></li><li data-type='method'><a href="module-bento.html#getSettings">getSettings</a></li><li data-type='method'><a href="module-bento.html#getViewport">getViewport</a></li><li data-type='method'><a href="module-bento.html#isDev">isDev</a></li><li data-type='method'><a href="module-bento.html#reload">reload</a></li><li data-type='method'><a href="module-bento.html#setAntiAlias">setAntiAlias</a></li><li data-type='method'><a href="module-bento.html#setGameSpeed">setGameSpeed</a></li><li data-type='method'><a href="module-bento.html#setup">setup</a></li></ul></details></li><li><details><summary>bento/autoresize</summary><a href="module-bento_autoresize.html">bento/autoresize</a></details></li><li><details><summary>bento/canvas</summary><a href="module-bento_canvas.html">bento/canvas</a><ul class='methods'><li data-type='method'><a href="module-bento_canvas.html#downloadImage">downloadImage</a></li><li data-type='method'><a href="module-bento_canvas.html#drawOnce">drawOnce</a></li><li data-type='method'><a href="module-bento_canvas.html#getBase64">getBase64</a></li><li data-type='method'><a href="module-bento_canvas.html#getCanvas">getCanvas</a></li><li data-type='method'><a href="module-bento_canvas.html#getContext">getContext</a></li></ul></details></li><li><details><summary>bento/components/clickable</summary><a href="module-bento_components_clickable.html">bento/components/clickable</a><ul class='methods'><li data-type='method'><a href="module-bento_components_clickable.html#isPaused">isPaused</a></li></ul></details></li><li><details><summary>bento/components/eventlistener</summary><a href="module-bento_components_eventlistener.html">bento/components/eventlistener</a></details></li><li><details><summary>bento/components/fill</summary><a href="module-bento_components_fill.html">bento/components/fill</a><ul class='methods'><li data-type='method'><a href="module-bento_components_fill.html#setOriginRelative">setOriginRelative</a></li></ul></details></li><li><details><summary>bento/components/modal</summary><a href="module-bento_components_modal.html">bento/components/modal</a></details></li><li><details><summary>bento/components/nineslice</summary><a href="module-bento_components_nineslice.html">bento/components/nineslice</a><ul class='methods'><li data-type='method'><a href="module-bento_components_nineslice.html#setOriginRelative">setOriginRelative</a></li></ul></details></li><li><details><summary>bento/components/pixi/sprite</summary><a href="module-bento_components_pixi_sprite.html">bento/components/pixi/sprite</a></details></li><li><details><summary>bento/components/spine</summary><a href="module-bento_components_spine.html">bento/components/spine</a><ul class='methods'><li data-type='method'><a href="module-bento_components_spine.html#getAnimation">getAnimation</a></li><li data-type='method'><a href="module-bento_components_spine.html#getCurrentSpeed">getCurrentSpeed</a></li><li data-type='method'><a href="module-bento_components_spine.html#getSpineData">getSpineData</a></li><li data-type='method'><a href="module-bento_components_spine.html#setAnimation">setAnimation</a></li><li data-type='method'><a href="module-bento_components_spine.html#setCurrentSpeed">setCurrentSpeed</a></li></ul></details></li><li><details><summary>bento/components/sprite</summary><a href="module-bento_components_sprite.html">bento/components/sprite</a><ul class='methods'><li data-type='method'><a href="module-bento_components_sprite.html#getAnimationName">getAnimationName</a></li><li data-type='method'><a href="module-bento_components_sprite.html#getCurrentFrame">getCurrentFrame</a></li><li data-type='method'><a href="module-bento_components_sprite.html#getCurrentSpeed">getCurrentSpeed</a></li><li data-type='method'><a href="module-bento_components_sprite.html#getFrameHeight">getFrameHeight</a></li><li data-type='method'><a href="module-bento_components_sprite.html#getFrameWidth">getFrameWidth</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setAnimation">setAnimation</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setAnimation">setAnimation</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setCurrentSpeed">setCurrentSpeed</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setFrame">setFrame</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setOriginRelative">setOriginRelative</a></li><li data-type='method'><a href="module-bento_components_sprite.html#setup">setup</a></li></ul></details></li><li><details><summary>bento/entity</summary><a href="module-bento_entity.html">bento/entity</a><ul class='methods'><li data-type='method'><a href="module-bento_entity.html#attach">attach</a></li><li data-type='method'><a href="module-bento_entity.html#collidesWith">collidesWith</a></li><li data-type='method'><a href="module-bento_entity.html#extend">extend</a></li><li data-type='method'><a href="module-bento_entity.html#getBoundingBox">getBoundingBox</a></li><li data-type='method'><a href="module-bento_entity.html#getComponent">getComponent</a></li><li data-type='method'><a href="module-bento_entity.html#getWorldPosition">getWorldPosition</a></li><li data-type='method'><a href="module-bento_entity.html#moveComponentTo">moveComponentTo</a></li><li data-type='method'><a href="module-bento_entity.html#remove">remove</a></li><li data-type='method'><a href="module-bento_entity.html#removeByName">removeByName</a></li><li data-type='method'><a href="module-bento_entity.html#removeSelf">removeSelf</a></li><li data-type='method'><a href="module-bento_entity.html#toComparablePosition">toComparablePosition</a></li><li data-type='method'><a href="module-bento_entity.html#toLocalPosition">toLocalPosition</a></li><li data-type='method'><a href="module-bento_entity.html#toWorldPosition">toWorldPosition</a></li></ul></details></li><li><details><summary>bento/eventsystem</summary><a href="module-bento_eventsystem.html">bento/eventsystem</a><ul class='methods'><li data-type='method'><a href="module-bento_eventsystem.html#clear">clear</a></li><li data-type='method'><a href="module-bento_eventsystem.html#fire">fire</a></li><li data-type='method'><a href="module-bento_eventsystem.html#off">off</a></li><li data-type='method'><a href="module-bento_eventsystem.html#on">on</a></li><li data-type='method'><a href="module-bento_eventsystem.html#stopPropagation">stopPropagation</a></li></ul></details></li><li><details><summary>bento/gui/centeredlist</summary><a href="module-bento_gui_centeredlist.html">bento/gui/centeredlist</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_centeredlist.html#clear">clear</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#get">get</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#getIndex">getIndex</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#iterate">iterate</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#length">length</a></li><li data-type='method'><a href="module-bento_gui_centeredlist.html#removeItem">removeItem</a></li></ul></details></li><li><details><summary>bento/gui/clickbutton</summary><a href="module-bento_gui_clickbutton.html">bento/gui/clickbutton</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_clickbutton.html#active">active</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#doCallback">doCallback</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#isActive">isActive</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#mimicClick">mimicClick</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#setActive">setActive</a></li><li data-type='method'><a href="module-bento_gui_clickbutton.html#setNineSliceSize">setNineSliceSize</a></li></ul></details></li><li><details><summary>bento/gui/counter</summary><a href="module-bento_gui_counter.html">bento/gui/counter</a></details></li><li><details><summary>bento/gui/scrollinglist</summary><a href="module-bento_gui_scrollinglist.html">bento/gui/scrollinglist</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_scrollinglist.html#active">active</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#addItem">addItem</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#cancel">cancel</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#didMove">didMove</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#forceTo">forceTo</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#get">get</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#getItems">getItems</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#getScroll">getScroll</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#getSelection">getSelection</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#getTotalSize">getTotalSize</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#isScrolling">isScrolling</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#iterate">iterate</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#length">length</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#removeItem">removeItem</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setActive">setActive</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setArea">setArea</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setMaxOffset">setMaxOffset</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setMinOffset">setMinOffset</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#setSpacing">setSpacing</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#snapTo">snapTo</a></li><li data-type='method'><a href="module-bento_gui_scrollinglist.html#stopSliding">stopSliding</a></li></ul></details></li><li><details><summary>bento/gui/text</summary><a href="module-bento_gui_text.html">bento/gui/text</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_text.html#getCanvas">getCanvas</a></li><li data-type='method'><a href="module-bento_gui_text.html#getEffectiveFontSize">getEffectiveFontSize</a></li><li data-type='method'><a href="module-bento_gui_text.html#getStrings">getStrings</a></li><li data-type='method'><a href="module-bento_gui_text.html#getText">getText</a></li><li data-type='method'><a href="module-bento_gui_text.html#setText">setText</a></li></ul></details></li><li><details><summary>bento/gui/togglebutton</summary><a href="module-bento_gui_togglebutton.html">bento/gui/togglebutton</a><ul class='methods'><li data-type='method'><a href="module-bento_gui_togglebutton.html#doCallback">doCallback</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#isActive">isActive</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#isToggled">isToggled</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#mimicClick">mimicClick</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#setActive">setActive</a></li><li data-type='method'><a href="module-bento_gui_togglebutton.html#toggle">toggle</a></li></ul></details></li><li><details><summary>bento/managers/asset</summary><a href="module-bento_managers_asset.html">bento/managers/asset</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_asset.html#getAssetGroups">getAssetGroups</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getAssets">getAssets</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getAudio">getAudio</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getImage">getImage</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getImageElement">getImageElement</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getJson">getJson</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getSpine">getSpine</a></li><li data-type='method'><a href="module-bento_managers_asset.html#getSpriteSheet">getSpriteSheet</a></li><li data-type='method'><a href="module-bento_managers_asset.html#hasAsset">hasAsset</a></li><li data-type='method'><a href="module-bento_managers_asset.html#load">load</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadAssetGroups">loadAssetGroups</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadAssetsJson">loadAssetsJson</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadAudioFromUrl">loadAudioFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadImageFromUrl">loadImageFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#loadJsonFromUrl">loadJsonFromUrl</a></li><li data-type='method'><a href="module-bento_managers_asset.html#reload">reload</a></li><li data-type='method'><a href="module-bento_managers_asset.html#reload">reload</a></li><li data-type='method'><a href="module-bento_managers_asset.html#unload">unload</a></li></ul></details></li><li><details><summary>bento/managers/audio</summary><a href="module-bento_managers_audio.html">bento/managers/audio</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_audio.html#getVolume">getVolume</a></li><li data-type='method'><a href="module-bento_managers_audio.html#isPlayingMusic">isPlayingMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#muteMusic">muteMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#muteSound">muteSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#playMusic">playMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#playSound">playSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#preventSounds">preventSounds</a></li><li data-type='method'><a href="module-bento_managers_audio.html#setVolume">setVolume</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopAllMusic">stopAllMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopAllSound">stopAllSound</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopMusic">stopMusic</a></li><li data-type='method'><a href="module-bento_managers_audio.html#stopSound">stopSound</a></li></ul></details></li><li><details><summary>bento/managers/input</summary><a href="module-bento_managers_input.html">bento/managers/input</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_input.html#getGamepadAxesLeft">getGamepadAxesLeft</a></li><li data-type='method'><a href="module-bento_managers_input.html#getGamepadAxesRight">getGamepadAxesRight</a></li><li data-type='method'><a href="module-bento_managers_input.html#getPointers">getPointers</a></li><li data-type='method'><a href="module-bento_managers_input.html#getRemoteAxes">getRemoteAxes</a></li><li data-type='method'><a href="module-bento_managers_input.html#isAnyGamepadButtonDown">isAnyGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isAnyKeyDown">isAnyKeyDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isGamepadButtonDown">isGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isGamepadButtonDown">isGamepadButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isKeyDown">isKeyDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#isRemoteButtonDown">isRemoteButtonDown</a></li><li data-type='method'><a href="module-bento_managers_input.html#resetPointers">resetPointers</a></li><li data-type='method'><a href="module-bento_managers_input.html#resume">resume</a></li><li data-type='method'><a href="module-bento_managers_input.html#setOffset">setOffset</a></li><li data-type='method'><a href="module-bento_managers_input.html#setRemoteExitOnMenuPress">setRemoteExitOnMenuPress</a></li><li data-type='method'><a href="module-bento_managers_input.html#stop">stop</a></li><li data-type='method'><a href="module-bento_managers_input.html#updateCanvas">updateCanvas</a></li></ul></details></li><li><details><summary>bento/managers/object</summary><a href="module-bento_managers_object.html">bento/managers/object</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_object.html#attach">attach</a></li><li data-type='method'><a href="module-bento_managers_object.html#count">count</a></li><li data-type='method'><a href="module-bento_managers_object.html#draw">draw</a></li><li data-type='method'><a href="module-bento_managers_object.html#get">get</a></li><li data-type='method'><a href="module-bento_managers_object.html#getByFamily">getByFamily</a></li><li data-type='method'><a href="module-bento_managers_object.html#getByName">getByName</a></li><li data-type='method'><a href="module-bento_managers_object.html#getObjects">getObjects</a></li><li data-type='method'><a href="module-bento_managers_object.html#isPaused">isPaused</a></li><li data-type='method'><a href="module-bento_managers_object.html#pause">pause</a></li><li data-type='method'><a href="module-bento_managers_object.html#remove">remove</a></li><li data-type='method'><a href="module-bento_managers_object.html#removeAll">removeAll</a></li><li data-type='method'><a href="module-bento_managers_object.html#resume">resume</a></li><li data-type='method'><a href="module-bento_managers_object.html#run">run</a></li><li data-type='method'><a href="module-bento_managers_object.html#setSortMode">setSortMode</a></li><li data-type='method'><a href="module-bento_managers_object.html#stop">stop</a></li><li data-type='method'><a href="module-bento_managers_object.html#update">update</a></li></ul></details></li><li><details><summary>bento/managers/savestate</summary><a href="module-bento_managers_savestate.html">bento/managers/savestate</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_savestate.html#add">add</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#clear">clear</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#getId">getId</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#getKeys">getKeys</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#getStorage">getStorage</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#load">load</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#remove">remove</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#save">save</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#setId">setId</a></li><li data-type='method'><a href="module-bento_managers_savestate.html#setStorage">setStorage</a></li></ul></details></li><li><details><summary>bento/managers/screen</summary><a href="module-bento_managers_screen.html">bento/managers/screen</a><ul class='methods'><li data-type='method'><a href="module-bento_managers_screen.html#add">add</a></li><li data-type='method'><a href="module-bento_managers_screen.html#getCurrentScreen">getCurrentScreen</a></li><li data-type='method'><a href="module-bento_managers_screen.html#hide">hide</a></li><li data-type='method'><a href="module-bento_managers_screen.html#reset">reset</a></li><li data-type='method'><a href="module-bento_managers_screen.html#show">show</a></li></ul></details></li><li><details><summary>bento/math/array2d</summary><a href="module-bento_math_array2d.html">bento/math/array2d</a><ul class='methods'><li data-type='method'><a href="module-bento_math_array2d.html#get">get</a></li><li data-type='method'><a href="module-bento_math_array2d.html#isArray2d">isArray2d</a></li><li data-type='method'><a href="module-bento_math_array2d.html#iterate">iterate</a></li><li data-type='method'><a href="module-bento_math_array2d.html#set">set</a></li></ul></details></li><li><details><summary>bento/math/polygon</summary><a href="module-bento_math_polygon.html">bento/math/polygon</a><ul class='methods'><li data-type='method'><a href="module-bento_math_polygon.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_polygon.html#getBoundingBox">getBoundingBox</a></li><li data-type='method'><a href="module-bento_math_polygon.html#hasPosition">hasPosition</a></li><li data-type='method'><a href="module-bento_math_polygon.html#intersect">intersect</a></li><li data-type='method'><a href="module-bento_math_polygon.html#isPolygon">isPolygon</a></li><li data-type='method'><a href="module-bento_math_polygon.html#offset">offset</a></li></ul></details></li><li><details><summary>bento/math/rectangle</summary><a href="module-bento_math_rectangle.html">bento/math/rectangle</a><ul class='methods'><li data-type='method'><a href="module-bento_math_rectangle.html#.copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getCenter">getCenter</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getCorner">getCorner</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getExtents">getExtents</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getSize">getSize</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getX2">getX2</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#getY2">getY2</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#grow">grow</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#hasPosition">hasPosition</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersect">intersect</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersection">intersection</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersectsCircle">intersectsCircle</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#intersectsLine">intersectsLine</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#isRectangle">isRectangle</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#offset">offset</a></li><li data-type='method'><a href="module-bento_math_rectangle.html#union">union</a></li></ul></details></li><li><details><summary>bento/math/transformmatrix</summary><a href="module-bento_math_transformmatrix.html">bento/math/transformmatrix</a><ul class='methods'><li data-type='method'><a href="module-bento_math_transformmatrix.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#multiply">multiply</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#multiplyWith">multiplyWith</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#multiplyWithVector">multiplyWithVector</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#prepend">prepend</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#reset">reset</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#rotate">rotate</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#scale">scale</a></li><li data-type='method'><a href="module-bento_math_transformmatrix.html#translate">translate</a></li></ul></details></li><li><details><summary>bento/math/vector2</summary><a href="module-bento_math_vector2.html">bento/math/vector2</a><ul class='methods'><li data-type='method'><a href="module-bento_math_vector2.html#add">add</a></li><li data-type='method'><a href="module-bento_math_vector2.html#addTo">addTo</a></li><li data-type='method'><a href="module-bento_math_vector2.html#angle">angle</a></li><li data-type='method'><a href="module-bento_math_vector2.html#angleBetween">angleBetween</a></li><li data-type='method'><a href="module-bento_math_vector2.html#clone">clone</a></li><li data-type='method'><a href="module-bento_math_vector2.html#copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_vector2.html#distance">distance</a></li><li data-type='method'><a href="module-bento_math_vector2.html#divide">divide</a></li><li data-type='method'><a href="module-bento_math_vector2.html#divideBy">divideBy</a></li><li data-type='method'><a href="module-bento_math_vector2.html#dotProduct">dotProduct</a></li><li data-type='method'><a href="module-bento_math_vector2.html#isCloserThan">isCloserThan</a></li><li data-type='method'><a href="module-bento_math_vector2.html#isFartherThan">isFartherThan</a></li><li data-type='method'><a href="module-bento_math_vector2.html#magnitude">magnitude</a></li><li data-type='method'><a href="module-bento_math_vector2.html#multiply">multiply</a></li><li data-type='method'><a href="module-bento_math_vector2.html#multiplyWith">multiplyWith</a></li><li data-type='method'><a href="module-bento_math_vector2.html#normalize">normalize</a></li><li data-type='method'><a href="module-bento_math_vector2.html#reflect">reflect</a></li><li data-type='method'><a href="module-bento_math_vector2.html#rotateDegree">rotateDegree</a></li><li data-type='method'><a href="module-bento_math_vector2.html#rotateRadian">rotateRadian</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scalarMultiply">scalarMultiply</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scalarMultiplyWith">scalarMultiplyWith</a></li><li data-type='method'><a href="module-bento_math_vector2.html#scale">scale</a></li><li data-type='method'><a href="module-bento_math_vector2.html#sqrMagnitude">sqrMagnitude</a></li><li data-type='method'><a href="module-bento_math_vector2.html#subtract">subtract</a></li><li data-type='method'><a href="module-bento_math_vector2.html#subtractFrom">subtractFrom</a></li><li data-type='method'><a href="module-bento_math_vector2.html#.copyInto">copyInto</a></li><li data-type='method'><a href="module-bento_math_vector2.html#.fromRotation">fromRotation</a></li></ul></details></li><li><details><summary>bento/objectpool</summary><a href="module-bento_objectpool.html">bento/objectpool</a><ul class='methods'><li data-type='method'><a href="module-bento_objectpool.html#~discard">discard</a></li><li data-type='method'><a href="module-bento_objectpool.html#~get">get</a></li></ul></details></li><li><details><summary>bento/packedimage</summary><a href="module-bento_packedimage.html">bento/packedimage</a></details></li><li><details><summary>bento/screen</summary><a href="module-bento_screen.html">bento/screen</a><ul class='methods'><li data-type='method'><a href="module-bento_screen.html#loadTiled">loadTiled</a></li><li data-type='method'><a href="module-bento_screen.html#onHide">onHide</a></li><li data-type='method'><a href="module-bento_screen.html#onShow">onShow</a></li></ul></details></li><li><details><summary>bento/sortedeventsystem</summary><a href="module-bento_sortedeventsystem.html">bento/sortedeventsystem</a><ul class='methods'><li data-type='method'><a href="module-bento_sortedeventsystem.html#off">off</a></li><li data-type='method'><a href="module-bento_sortedeventsystem.html#on">on</a></li></ul></details></li><li><details><summary>bento/tiled</summary><a href="module-bento_tiled.html">bento/tiled</a></details></li><li><details><summary>bento/tiledreader</summary><a href="module-bento_tiledreader.html">bento/tiledreader</a><ul class='methods'><li data-type='method'><a href="module-bento_tiledreader.html#read">read</a></li></ul></details></li><li><details><summary>bento/tween</summary><a href="module-bento_tween.html">bento/tween</a><ul class='methods'><li data-type='method'><a href="module-bento_tween.html#begin">begin</a></li><li data-type='method'><a href="module-bento_tween.html#pause">pause</a></li><li data-type='method'><a href="module-bento_tween.html#removeSelf">removeSelf</a></li><li data-type='method'><a href="module-bento_tween.html#resume">resume</a></li><li data-type='method'><a href="module-bento_tween.html#stop">stop</a></li></ul></details></li><li><details><summary>bento/utils</summary><a href="module-bento_utils.html">bento/utils</a><ul class='methods'><li data-type='method'><a href="module-bento_utils.html#approach">approach</a></li><li data-type='method'><a href="module-bento_utils.html#checksum">checksum</a></li><li data-type='method'><a href="module-bento_utils.html#clamp">clamp</a></li><li data-type='method'><a href="module-bento_utils.html#cloneJson">cloneJson</a></li><li data-type='method'><a href="module-bento_utils.html#copyObject">copyObject</a></li><li data-type='method'><a href="module-bento_utils.html#extend">extend</a></li><li data-type='method'><a href="module-bento_utils.html#forEach">forEach</a></li><li data-type='method'><a href="module-bento_utils.html#getDefault">getDefault</a></li><li data-type='method'><a href="module-bento_utils.html#getKeyLength">getKeyLength</a></li><li data-type='method'><a href="module-bento_utils.html#getRandom">getRandom</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomFloat">getRandomFloat</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomRange">getRandomRange</a></li><li data-type='method'><a href="module-bento_utils.html#getRandomRangeFloat">getRandomRangeFloat</a></li><li data-type='method'><a href="module-bento_utils.html#getScreenSize">getScreenSize</a></li><li data-type='method'><a href="module-bento_utils.html#isAmazonDevice">isAmazonDevice</a></li><li data-type='method'><a href="module-bento_utils.html#isAndroid">isAndroid</a></li><li data-type='method'><a href="module-bento_utils.html#isAndroidDevice">isAndroidDevice</a></li><li data-type='method'><a href="module-bento_utils.html#isApple">isApple</a></li><li data-type='method'><a href="module-bento_utils.html#isArray">isArray</a></li><li data-type='method'><a href="module-bento_utils.html#isBetween">isBetween</a></li><li data-type='method'><a href="module-bento_utils.html#isBoolean">isBoolean</a></li><li data-type='method'><a href="module-bento_utils.html#isCocoonJs">isCocoonJs</a></li><li data-type='method'><a href="module-bento_utils.html#isDefined">isDefined</a></li><li data-type='method'><a href="module-bento_utils.html#isDev">isDev</a></li><li data-type='method'><a href="module-bento_utils.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="module-bento_utils.html#isFunction">isFunction</a></li><li data-type='method'><a href="module-bento_utils.html#isInt">isInt</a></li><li data-type='method'><a href="module-bento_utils.html#isIosDevice">isIosDevice</a></li><li data-type='method'><a href="module-bento_utils.html#isMobileBrowser">isMobileBrowser</a></li><li data-type='method'><a href="module-bento_utils.html#isNativeAndroid">isNativeAndroid</a></li><li data-type='method'><a href="module-bento_utils.html#isNativeIos">isNativeIos</a></li><li data-type='method'><a href="module-bento_utils.html#isNotEmpty">isNotEmpty</a></li><li data-type='method'><a href="module-bento_utils.html#isNumber">isNumber</a></li><li data-type='method'><a href="module-bento_utils.html#isObject">isObject</a></li><li data-type='method'><a href="module-bento_utils.html#isString">isString</a></li><li data-type='method'><a href="module-bento_utils.html#isUndefined">isUndefined</a></li><li data-type='method'><a href="module-bento_utils.html#log">log</a></li><li data-type='method'><a href="module-bento_utils.html#modulo">modulo</a></li><li data-type='method'><a href="module-bento_utils.html#pickRandom">pickRandom</a></li><li data-type='method'><a href="module-bento_utils.html#pickRandomFrom">pickRandomFrom</a></li><li data-type='method'><a href="module-bento_utils.html#removeFromArray">removeFromArray</a></li><li data-type='method'><a href="module-bento_utils.html#repeat">repeat</a></li><li data-type='method'><a href="module-bento_utils.html#setDev">setDev</a></li><li data-type='method'><a href="module-bento_utils.html#sign">sign</a></li><li data-type='method'><a href="module-bento_utils.html#toDegree">toDegree</a></li><li data-type='method'><a href="module-bento_utils.html#toRadian">toRadian</a></li></ul></details></li></ul><h3>Global</h3><ul><li><a href="global.html#bento">bento</a></li><li><a href="global.html">bento define</a></li><li><a href="global.html">bento require</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">entity.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * A base object to hold components. Has dimension, position, scale and rotation properties (though these don't have much
 meaning until you attach a Sprite component). Entities can be added to the game by calling Bento.objects.attach().
 Entities can be visualized by using the Sprite component, or you can attach your own component and add a draw function.
 * &lt;br>Exports: Constructor
 * @module {Entity} bento/entity
 * @moduleName Entity
 * @param {Object} settings - settings (all properties are optional)
 * @param {Function} settings.init - Called when entity is initialized
 * @param {Array} settings.components - Array of component module functions
 * @param {Array} settings.family - Array of family names. See {@link module:bento/managers/object#getByFamily}
 * @param {Vector2} settings.position - Vector2 of position to set
 * @param {Rectangle} settings.dimension - Size of the entity
 * @param {Rectangle} settings.boundingBox - Rectangle used for collision checking (if this does not exist, dimension is used as bounding box)
 * @param {Number} settings.z - z-index to set (note: higher values go on top)
 * @param {Number} settings.alpha - Opacity of the entity (1 = fully visible)
 * @param {Number} settings.rotation - Rotation of the entity in radians
 * @param {Vector2} settings.scale - Scale of the entity
 * @param {Boolean} settings.updateWhenPaused - Should entity keep updating when game is paused
 * @param {Boolean} settings.global - Should entity remain after hiding a screen
 * @param {Boolean} settings.float - Should entity move with the screen
 * @example
var entity = new Entity({
    z: 0,
    name: 'myEntity',
    position: new Vector2(32, 32),
    components: [new Sprite({
        imageName: 'myImage',
        originRelative: new Vector2(0.5, 1)    // bottom center origin
    })] // see Sprite module
 });
 * // attach entity to Bento Objects
 * Bento.objects.attach(entity);
 * @returns {Entity} Returns a new entity object
 * @snippet Entity|constructor
Entity({
    z: ${1:0},
    name: '$2',
    family: [''],
    position: new Vector2(${3:0}, ${4:0}),
    components: [
        $5
    ]
});
 */
bento.define('bento/entity', [
    'bento',
    'bento/utils',
    'bento/math/vector2',
    'bento/math/rectangle',
    'bento/math/transformmatrix',
    'bento/transform'
], function (
    Bento,
    Utils,
    Vector2,
    Rectangle,
    Matrix,
    Transform
) {
    'use strict';
    var cleanComponents = function (entity) {
        // remove null components
        var i;
        for (i = entity.components.length - 1; i >= 0; --i) {
            if (!entity.components[i]) {
                entity.components.splice(i, 1);
            }
        }
    };
    var id = 0;

    var Entity = function (settings) {
        if (!(this instanceof Entity)) {
            return new Entity(settings);
        }
        var i, l;
        /**
         * Name of the entity
         * @instance
         * @default ''
         * @name name
         * @snippet #Entity.name|String
            name
         * @snippet #Entity.isAdded|read-only
            isAdded
         */
        this.name = '';
        /**
         * Position of the entity
         * @instance
         * @default Vector2(0, 0)
         * @name position
         * @snippet #Entity.position|Vector2
            position
         */
        this.position = new Vector2(0, 0);
        /*
         * UNLISTED developer should never edit this array directly
         * Families of the entity. Note: edit this before the entity is attached.
         * @instance
         * @default []
         * @see module:bento/managers/object#getByFamily
         * @name family
         */
        this.family = [];
        /*
         * UNLISTED developer should never edit this array directly
         * Components of the entity
         * @instance
         * @default []
         * @name components
         * @snippet #Entity.components|Array
            components
         */
        this.components = [];

        this.global = false;
        /**
         * Indicates if an object should move with the scrolling of the screen
         * @instance
         * @default false
         * @name float
         * @snippet #Entity.float|Boolean
            float
         */
        this.float = false;
        /**
         * Indicates if an object should continue updating when the game is paused.
         * If updateWhenPaused is larger or equal than the pause level then the
         * game ignores the pause.
         * @instance
         * @default 0
         * @name updateWhenPaused
         * @snippet #Entity.updateWhenPaused|Number
            updateWhenPaused
         */
        this.updateWhenPaused = 0;
        this.isAdded = false;
        /**
         * Dimension of the entity
         * @instance
         * @default Rectangle(0, 0, 0, 0)
         * @name dimension
         * @snippet #Entity.dimension|Rectangle
            dimension
         */
        this.dimension = new Rectangle(0, 0, 0, 0);
        /**
         * Boundingbox of the entity
         * @instance
         * @default null
         * @see module:bento/entity#getBoundingBox for usage
         * @name boundingBox
         * @snippet #Entity.boundingBox|Rectangle
            boundingBox
         */
        this.boundingBox = settings.boundingBox || null;
        /**
         * Scale of the entity
         * @instance
         * @default Vector2(1, 1)
         * @name scale
         * @snippet #Entity.scale|Vector2
            scale
         */
        this.scale = new Vector2(1, 1);
        /**
         * Rotation of the entity in radians
         * @instance
         * @default 0
         * @name rotation
         * @snippet #Entity.rotation|Number
            rotation
         */
        this.rotation = 0;
        /**
         * Opacity of the entity
         * @instance
         * @default 1
         * @name alpha
         * @snippet #Entity.alpha|Number
            alpha
         */
        this.alpha = 1;
        /**
         * Whether the entity calls the draw function
         * @instance
         * @default true
         * @name visible
         * @snippet #Entity.visible|Boolean
            visible
         */
        this.visible = true;
        /**
         * Unique id
         * @instance
         * @name id
         * @snippet #Entity.id|Number
            id
         */
        this.id = id++;
        /**
         * z-index of an object
         * @instance
         * @default 0
         * @name z
         * @snippet #Entity.z|Number
            z
         */
        this.z = 0;
        /**
         * Index position of its parent (if any)
         * @instance
         * @default -1
         * @name rootIndex
         */
        this.rootIndex = -1;
        /**
         * Timer value, incremented every update step (dependent on game speed)
         * @instance
         * @default 0
         * @name timer
         * @snippet #Entity.timer|Number
            timer
         */
        this.timer = 0;
        /**
         * Ticker value, incremented every update step (independent of game speed)
         * @instance
         * @default 0
         * @name ticker
         * @snippet #Entity.ticker|Number
            ticker
         */
        this.ticker = 0;
        /**
         * Indicates if an object should not be destroyed when a Screen ends
         * @instance
         * @default false
         * @name global
         * @snippet #Entity.global|Boolean
            global
         */
        /**
         * Transform module
         * @instance
         * @name transform
         * @snippet #Entity.transform|Transform
            transform
         */
        this.transform = new Transform(this);
        /**
         * Entity's parent object, is set by the attach function, not recommended to set manually unless you know what you're doing.
         * @instance
         * @default null
         * @see module:bento/entity#attach
         * @name parent
         * @snippet #Entity.parent|read-only
            parent
         */
        this.parent = null;
        /**
         * Reference to the settings parameter passed to the constructor
         * @instance
         * @name settings
         * @snippet #Entity.settings|Object
            settings
         */
        this.settings = settings;
        // Current component that is being processed, useful for debugging
        this.currentComponent = null;

        // read settings
        if (settings) {
            if (settings.position) {
                this.position = settings.position; // should this be cloned?
            }
            if (settings.dimension) {
                this.dimension = settings.dimension;
            }
            if (settings.scale) {
                this.scale = settings.scale;
            }
            if (settings.name) {
                this.name = settings.name;
            }
            if (settings.family) {
                if (!Utils.isArray(settings.family)) {
                    settings.family = [settings.family];
                }
                for (i = 0, l = settings.family.length; i &lt; l; ++i) {
                    this.family.push(settings.family[i]);
                }
            }
            if (Utils.isDefined(settings.alpha)) {
                this.alpha = settings.alpha;
            }
            if (Utils.isDefined(settings.rotation)) {
                this.rotation = settings.rotation;
            }
            if (Utils.isDefined(settings.visible)) {
                this.visible = settings.visible;
            }

            this.z = settings.z || 0;
            this.updateWhenPaused = settings.updateWhenPaused || 0;
            this.global = settings.global || false;
            this.float = settings.float || false;

            // attach components after initializing other variables
            if (settings.components) {
                if (!Utils.isArray(settings.components)) {
                    settings.components = [settings.components];
                }
                for (i = 0, l = settings.components.length; i &lt; l; ++i) {
                    this.attach(settings.components[i]);
                }
            }
            // you might want to do things before the entity returns
            if (settings.init) {
                settings.init.apply(this);
            }

            if (settings.addNow) {
                Bento.objects.add(this);
            }
        }
    };
    Entity.prototype.isEntity = function () {
        return true;
    };

    /**
     * Extends properties of entity
     * @function
     * @instance
     * @param {Object} object - other object
     * @see module:bento/utils#extend
     * @example
var entity = new Entity({});

entity.extend({
    addX: function (x) {
        entity.position.x += x;
        // alternatively, this.position.x would work too.
    }
});

entity.addX(10);
    * @snippet #Entity.extend|Entity
extend(${1:{}});
     * @returns {Entity} Returns itself
     * @name extend
     */
    Entity.prototype.extend = function (object) {
        return Utils.extend(this, object);
    };
    /**
     * Returns the bounding box of an entity that's ready to be compared for collisions.
     * If no bounding box was set to entity.boundingBox, the dimension assumed as bounding box size.
     * entity.boundingBox is a Rectangle relative the entity's position, while getBoundingBox returns
     * a rectangle that's positioned in world space and scaled appropiately (AABB only, does not take into account rotation)
     * @function
     * @returns {Rectangle} boundingbox - Entity's boundingbox with translation and scaling
     * @instance
     * @name getBoundingBox
    * @snippet #Entity.getBoundingBox|Rectangle
getBoundingBox();
     * @returns {Rectangle} A rectangle representing the boundingbox of the entity
     */
    var correctBoundingBox = function (entity, boundingBox) {
        // this function offsets a boundingbox with an entity's position and scale
        var box = boundingBox.clone();
        var position = entity.position;
        var scale = entity.scale;
        // note that we need the abs of scale to prevent negative widths
        box.x *= Math.abs(scale.x);
        box.y *= Math.abs(scale.y);
        box.width *= Math.abs(scale.x);
        box.height *= Math.abs(scale.y);
        box.x += position.x;
        box.y += position.y;
        return box;
    };
    Entity.prototype.getBoundingBox = function () {
        return correctBoundingBox(this, this.boundingBox || this.dimension);
    };

    /**
     * Attaches a child object to the entity. Entities can form a scenegraph this way.
     * This is one of the most important functions in Bento. It allows you to attach new behaviors
     * to the entity by attaching components or other Entities.
     * The parent entity calls start(), destroy(), update() and draw() in the child.
     * The child will have a 'parent' property, which references the parent entity.
     * @function
     * @param {Object} child - The child object to attach (can be anything)
     * @param {Boolean} force - Allow duplicate attaching
     * @instance
     * @example
var entity = new Entity({}),
    // we define a simple object literal that acts as a container for functions
    child = {
        name: 'childObject', // for retrieving the child later if needed
        start: function (data) {
            console.log('Logged when entity is attached (not when child is attached)');
        },
        destroy: function (data) {
            console.log('Logged when child is removed or when entity is removed');
        },
        update: function (data) {
            console.log('Logged every tick during the update loop');
        },
        draw: function (data) {
            console.log('Logged every tick during the draw loop');
        }
    };

// You can use object literals to attach or define new classes. The child could also be another Entity with a sprite!
entity.attach(child);

// attach the entity to the game
Bento.objects.attach(entity);
     * @name attach
     * @snippet #Entity.attach|Entity
attach(${1});
     * @returns {Entity} Returns itself (useful for chaining attach calls)
     */
    Entity.prototype.attach = function (child, force) {
        var parent = this,
            data = Bento.getGameData();

        if (!child) {
            Utils.log("ERROR: trying to attach " + child);
            return;
        }

        if (!child.name) {
            console.warn("WARNING: component has no name", child);
        }

        if (!force &amp;&amp; (child.isAdded || child.parent)) {
            Utils.log("ERROR: Child " + child.name + " was already attached.");
            return;
        }

        data.entity = this;

        // attach the child
        // NOTE: attaching will always set the properties "parent" and "rootIndex"
        child.parent = this;
        child.rootIndex = this.components.length;
        this.components.push(child);
        // call child.attached
        if (child.attached) {
            child.attached(data);
        }

        // the parent entity was already added: call start on the child
        if (this.isAdded) {
            if (child.start) {
                child.start(data);
            }
        } else {
            // maybe the parent entity itself is a child, search for any grandparent that's added
            if (parent.parent) {
                parent = parent.parent;
            }
            while (parent) {
                if (parent.isAdded) {
                    if (child.start) {
                        child.start(data);
                    }
                    break;
                }
                parent = parent.parent;
            }
        }
        return this;
    };
    /**
     * Removes a child object from the entity. Note that destroy will be called in the child.
     * @function
     * @param {Object} child - The child object to remove
     * @instance
     * @name remove
     * @snippet #Entity.remove|Entity
remove();
     * @returns {Entity} Returns itself
     */
    Entity.prototype.remove = function (child) {
        var i, type, index;
        var parent = this;
        var data = Bento.getGameData();

        if (!child) {
            return;
        }
        index = this.components.indexOf(child);
        this.components[index] = null;

        if (index >= 0) {
            // the parent entity is an added entity: call destroy on the child
            if (this.isAdded) {
                if (child.destroy) {
                    child.destroy(data);
                }
            } else {
                // maybe the parent entity itself is a child, search for any grandparent that's added
                if (parent.parent) {
                    parent = parent.parent;
                }
                while (parent) {
                    if (parent.isAdded) {
                        if (child.destroy) {
                            child.destroy(data);
                        }
                        break;
                    }
                    parent = parent.parent;
                }
            }

            if (child.removed) {
                child.removed(data);
            }
            child.parent = null;
            child.rootIndex = -1; // note that sibling rootIndex may be incorrect until the next update loop
        }
        return this;
    };
    /**
     * Searches a child with certain name and removes the first result. Does nothing if not found
     * @function
     * @param {String} name - The name of the child object to remove
     * @instance
     * @name removeByName
     * @snippet #Entity.removeByName|Entity
removeByName('$1');
     * @returns {Entity} Returns itself
     */
    Entity.prototype.removeByName = function (name) {
        var entity = this;

        entity.getComponent(name, function (component) {
            entity.remove(component);
        });
        return this;
    };
    /**
     * Removes self from game (either from Bento.objects or its parent)
     * @function
     * @instance
     * @name removeSelf
     * @snippet #Entity.removeSelf|Entity
removeSelf();
     * @returns {Entity} Returns itself
     */
    Entity.prototype.removeSelf = function (name) {
        var entity = this;

        if (entity.parent) {
            // remove from parent
            entity.parent.remove(entity);
        } else if (entity.isAdded) {
            // remove from Bento.objects
            Bento.objects.remove(entity);
        }

        return this;
    };
    /**
     * Callback when component is found
     * this: refers to the component
     *
     * @callback FoundCallback
     * @param {Component} component - The component
     * @param {Number} index - Index of the component
     */
    /**
     * Returns the first child found with a certain name
     * @function
     * @instance
     * @param {String} name - name of the component
     * @param {FoundCallback} callback - called when component is found
     * @name getComponent
     * @snippet #Entity.getComponent|Entity
getComponent('${1}', function (${1:component}) {
    $2
});
     * @returns {Entity} Returns the component, null if not found
     */
    Entity.prototype.getComponent = function (name, callback) {
        var i, l, component;
        for (i = 0, l = this.components.length; i &lt; l; ++i) {
            component = this.components[i];
            if (component &amp;&amp; component.name === name) {
                if (callback) {
                    callback.apply(component, [component, i]);
                }
                return component;
            }
        }
        return null;
    };

    /**
     * Moves a child to a certain index in the array
     * @function
     * @instance
     * @param {Object} child - reference to the child
     * @param {Number} index - new index
     * @name moveComponentTo
     * @snippet #Entity.moveComponentTo|Entity
moveComponentTo(${1:component}, ${2:index});
     */
    Entity.prototype.moveComponentTo = function (component, newIndex) {
        // note: currently dangerous to do during an update loop
        var i, type, index;
        if (!component) {
            return;
        }
        index = this.components.indexOf(component);
        if (index >= 0) {
            // remove old
            this.components.splice(index, 1);
            // insert at new place
            this.components.splice(newIndex, 0, component);
        }
    };
    /**
     * Add this entity to a family
     * @function
     * @instance
     * @param {String} family - the family that the entity should be added to
     */
    Entity.prototype.addToFamily = function (f) {
        if (this.family.indexOf(f) !== -1) {
            return;
        }
        this.family.push(f);
        Bento.objects.addObjectToFamily(this, f);
    };
    /**
     * Remove this entity from a family
     * @function
     * @instance
     * @param {String} family - the family that this entity should be removed from
     */
    Entity.prototype.removeFromFamily = function (f) {
        var idx = this.family.indexOf(f);
        if (idx === -1) {
            return;
        }
        this.family.splice(idx, 1);
        Bento.objects.removeObjectFromFamily(this, f);
    };
    /**
     * Check if the entity is part of a family
     * @function
     * @instance
     * @param {String} family
     */
    Entity.prototype.isFamily = function (f) {
        return (this.family.indexOf(f) !== -1);
    };
    /**
     * Callback when entities collide.
     *
     * @callback CollisionCallback
     * @param {Entity} other - The other entity colliding
     */
    /**
     * Checks if entity is colliding with another entity or entities
     * @function
     * @instance
     * @param {Object} settings
     * @param {Entity} settings.entity - The other entity
     * @param {Array} settings.entities - Or an array of entities to check with
     * @param {String} settings.name - Or the other entity's name (use family for better performance)
     * @param {String} settings.family - Or the name of the family to collide with
     * @param {Entity} settings.rectangle - Or if you want to check collision with a shape directly instead of entity
     * @param {Vector2} [settings.offset] - A position offset
     * @param {CollisionCallback} [settings.onCollide] - Called when entities are colliding
     * @param {Boolean} [settings.firstOnly] - For detecting only first collision or more, default true
     * @name collidesWith
     * @snippet #Entity.collidesWith|Entity/Array
collidesWith({
    entity: obj, // when you have the reference
    entities: [], // or when colliding with this array
    name: '', // or when colliding with a single entity
    family: '', // or when colliding with a family
    rectangle: rect, // or when colliding with a rectangle
    offset: vec2, // offset the collision check on original entity's position
    firstOnly: true, // onCollide stops after having found single collision 
    onCollide: function (other) {
        // other is the other entity that is collided with
        // onCollide is not called if no collision occurred 
    }
});
     * @returns {Entity/Array} The collided entity/entities, otherwise null
     */
    // * @param {Array} settings.families - multiple families
    Entity.prototype.collidesWith = function (settings, deprecated_offset, deprecated_callback) {
        var intersect = false;
        var box;
        var otherBox;
        var i, l;
        var obj;
        var array = [];
        var offset = new Vector2(0, 0);
        var callback;
        var firstOnly = true;
        var collisions = null;
        var component;

        if (settings.isEntity) {
            // old method with parameters: collidesWith(entity, offset, callback)
            array = [settings];
            offset = deprecated_offset || offset;
            callback = deprecated_callback;
        } else if (Utils.isArray(settings)) {
            // old method with parameters: collidesWith(array, offset, callback)
            array = settings;
            offset = deprecated_offset || offset;
            callback = deprecated_callback;
        } else {
            // read settings
            offset = settings.offset || offset;
            if (Utils.isDefined(settings.firstOnly)) {
                firstOnly = settings.firstOnly;
            }
            callback = settings.onCollide;

            if (settings.entity) {
                // single entity
                if (!settings.entity.isEntity) {
                    Utils.log("WARNING: settings.entity is not an entity");
                    return null;
                }
                array = [settings.entity];
            } else if (settings.entities) {
                if (!Utils.isArray(settings.entities)) {
                    Utils.log("WARNING: settings.entities is not an array");
                    return null;
                }
                array = settings.entities;
            } else if (settings.name) {
                array = Bento.objects.getByName(settings.name);
            } else if (settings.family) {
                array = Bento.objects.getByFamily(settings.family);
            } else if (settings.rectangle) {
                array = [settings.rectangle];
            }
        }

        if (!array.length) {
            return null;
        }
        box = this.getBoundingBox().offset(offset);
        for (i = 0, l = array.length; i &lt; l; ++i) {
            obj = array[i];

            if (obj.isEntity) {
                // ignore self collision
                if (obj.id === this.id) {
                    continue;
                }
                otherBox = obj.getBoundingBox();
            } else if (obj.isRectangle) {
                otherBox = obj;
            }
            if (box.intersect(otherBox)) {
                if (callback) {
                    callback(obj);
                }
                if (firstOnly) {
                    // return the first collision it can find
                    return obj;
                } else {
                    // collect other collisions
                    collisions = collisions || [];
                    collisions.push(obj);
                }
            }

        }
        return collisions;
    };
    /* DEPRECATED
     * Checks if entity is colliding with any entity in an array
     * Returns the first entity it finds that collides with the entity.
     * @function
     * @instance
     * @param {Object} settings
     * @param {Array} settings.entities - Array of entities, ignores self if present
     * @param {Array} settings.family - Name of family
     * @param {Vector2} [settings.offset] - A position offset
     * @param {CollisionCallback} [settings.onCollide] - Called when entities are colliding
     * @name collidesWithGroup
     * @returns {Entity} Returns the entity it collides with, null if none found
     */
    Entity.prototype.collidesWithGroup = function (settings, deprecated_offset, deprecated_callback) {
        var i, l, obj, box;
        var array, offset, callback;

        // old method with parameters
        if (Utils.isArray(settings) || Utils.isDefined(deprecated_offset) || Utils.isDefined(deprecated_callback)) {
            array = settings;
            offset = deprecated_offset || new Vector2(0, 0);
            callback = deprecated_callback;
        } else {
            array = settings.other;
            offset = settings.offset;
            callback = settings.onCollide;
        }

        if (!Utils.isArray(array)) {
            Utils.log("ERROR: Collision check must be with an Array of object");
            return;
        }
        if (!array.length) {
            return null;
        }
        box = this.getBoundingBox().offset(offset);
        for (i = 0, l = array.length; i &lt; l; ++i) {
            obj = array[i];
            if (obj.id &amp;&amp; obj.id === this.id) {
                continue;
            }
            if (obj.getBoundingBox &amp;&amp; box.intersect(obj.getBoundingBox())) {
                if (callback) {
                    callback(obj);
                }
                return obj;
            }
        }
        return null;
    };

    /**
     * Transforms this entity's position to the world position
     * @function
     * @instance
     * @name getWorldPosition
     * @returns {Vector2} Returns a position
     * @snippet #Entity.getWorldPosition|Entity
getWorldPosition();
     */
    Entity.prototype.getWorldPosition = function () {
        return this.transform.getWorldPosition();
    };

    /**
     * Transforms a position local to entity's space to the world position
     * @function
     * @instance
     * @name toWorldPosition
     * @param {Vector2} localPosition - A position to transform to world position
     * @returns {Vector2} Returns a position
     */
    Entity.prototype.toWorldPosition = function (localPosition) {
        return this.transform.toWorldPosition(localPosition);
    };
    /**
     * Transforms a world position to the entity's local position
     * @function
     * @instance
     * @name toLocalPosition
     * @param {Vector2} worldPosition - A position to transform to local position
     * @returns {Vector2} Returns a position relative to the entity
     */
    Entity.prototype.toLocalPosition = function (worldPosition) {
        return this.transform.toLocalPosition(worldPosition);
    };

    /**
     * Transforms a world position to the same space as the entity's
     * @function
     * @instance
     * @name toComparablePosition
     * @param {Vector2} worldPosition - A vector2 to transform
     * @returns {Vector2} Returns a position relative to the entity's parent
     * @snippet #Entity.toComparablePosition|Entity
toComparablePosition(${1:worldPosition});
     */
    Entity.prototype.toComparablePosition = function (worldPosition) {
        return this.transform.toComparablePosition(worldPosition);
    };

    /*
     * Implementations of callback functions from here on.
     * These are the functions that the Entity passes to it's children (components).
     * The developer shouldn't need to call these functions themselves.
     * Overwrite only if you know what you're doing
     */
    Entity.prototype.start = function (data) {
        var i,
            l,
            component;
        data = data || Bento.getGameData();
        // update components
        for (i = 0, l = this.components.length; i &lt; l; ++i) {
            component = this.components[i];
            if (component &amp;&amp; component.start) {
                data.entity = this;
                component.start(data);
            }
        }
    };
    Entity.prototype.destroy = function (data) {
        var i,
            l,
            component,
            components = this.components;
        data = data || Bento.getGameData();
        // update components
        for (i = 0, l = components.length; i &lt; l; ++i) {
            component = components[i];
            if (component &amp;&amp; component.destroy) {
                data.entity = this;
                component.destroy(data);
            }
        }
    };
    Entity.prototype.update = function (data) {
        var i,
            l,
            component,
            components = this.components;

        data = data || Bento.getGameData();
        // update components
        for (i = 0, l = components.length; i &lt; l; ++i) {
            component = components[i];
            if (component &amp;&amp; component.update) {
                this.currentComponent = component;
                data.entity = this;
                component.rootIndex = i;
                component.update(data);
            }
        }

        this.timer += data.speed;
        this.ticker += 1;

        // clean up
        cleanComponents(this);
        this.currentComponent = null;
    };
    Entity.prototype.draw = function (data) {
        var i, l, component;
        var components = this.components;
        var matrix;
        if (!this.visible || !this.transform.visible) {
            return;
        }
        data = data || Bento.getGameData();

        this.transform.draw(data);

        // call components
        for (i = 0, l = components.length; i &lt; l; ++i) {
            component = components[i];
            if (component &amp;&amp; component.draw) {
                this.currentComponent = component;
                data.entity = this;
                component.draw(data);
            }
        }
        // post draw
        for (i = components.length - 1; i >= 0; i--) {
            component = components[i];
            if (component &amp;&amp; component.postDraw) {
                data.entity = this;
                component.postDraw(data);
            }
        }

        this.transform.postDraw(data);
        this.currentComponent = null;
    };
    /*
     * Entity was attached, calls onParentAttach to all children
     */
    Entity.prototype.attached = function (data) {
        var i,
            l,
            component;

        data = data || Bento.getGameData();
        data.entity = this;
        data.parent = this.parent;

        // update components
        for (i = 0, l = this.components.length; i &lt; l; ++i) {
            component = this.components[i];
            if (component) {
                if (component.onParentAttached) {
                    data.entity = this;
                    component.onParentAttached(data);
                }
            }
        }
    };
    /*
     * Entity was removed, calls onParentRemoved to all children
     */
    Entity.prototype.removed = function (data) {
        var i,
            l,
            component;

        data = data || Bento.getGameData();
        data.entity = this;
        data.parent = this.parent;

        // update components
        for (i = 0, l = this.components.length; i &lt; l; ++i) {
            component = this.components[i];
            if (component) {
                if (component.onParentRemoved) {
                    data.entity = this;
                    component.onParentRemoved(data);
                }
            }
        }
    };
    /* DEPRECATED
     * Calls onParentCollided on every child, additionally calls onCollide on self afterwards
     */
    Entity.prototype.collided = function (data) {
        var i,
            l,
            component;

        if (data) {
            data.entity = this;
            data.parent = this.parent;
        } else {
            throw "Must pass a data object";
        }
        // update components
        for (i = 0, l = this.components.length; i &lt; l; ++i) {
            component = this.components[i];
            if (component) {
                if (component.onParentCollided) {
                    data.entity = this;
                    component.onParentCollided(data);
                }
            }
        }
        if (this.onCollide) {
            this.onCollide(data.other);
        }
    };

    Entity.prototype.toString = function () {
        return '[object Entity]';
    };

    return Entity;
});</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/opennav.js"></script>
</body>
</html>
